(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{133:function(e,t,a){e.exports=a.p+"static/media/mylogo.cdc50227.png"},135:function(e,t,a){e.exports=a.p+"static/media/preloader1.d5c02aa6.gif"},136:function(e,t,a){e.exports={container:"Preloader_container__2JuV0"}},138:function(e,t,a){e.exports=a.p+"static/media/user.8b1dbb1f.png"},140:function(e,t,a){e.exports={item:"Post_item__3jvmD",posts:"Post_posts__2fzGB"}},169:function(e,t,a){e.exports=a(296)},174:function(e,t,a){},175:function(e,t,a){},18:function(e,t,a){e.exports={formControl:"FormsControls_formControl__GCRRp",error:"FormsControls_error__1SZfH",warning:"FormsControls_warning__81yOC",redux_form:"FormsControls_redux_form__3TVMV",formButtons:"FormsControls_formButtons__2_HCy",formSummaryError:"FormsControls_formSummaryError__1wuvH"}},24:function(e,t,a){e.exports={nav:"Navbar_nav__3btH3",item:"Navbar_item__3SCzC"}},295:function(e,t){},296:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(70),c=a.n(s),o=(a(174),a(175),a(33)),l=a(34),u=a(37),i=a(36),m=a(12),d=a(2),f=a.n(d),h=a(4),g=a(25),p=a(1),b=a(132),E=a(143),v=Object(E.a)("keyval-store",1,{upgrade:function(e){e.createObjectStore("keyval")}}),C=function(e){return Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v;case 2:return t.abrupt("return",t.sent.get("keyval",e));case 3:case"end":return t.stop()}}),t)})))()},_=function(e,t){return Object(h.a)(f.a.mark((function a(){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v;case 2:return a.abrupt("return",a.sent.put("keyval",t,e));case 3:case"end":return a.stop()}}),a)})))()},O=function(e){return Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v;case 2:return t.abrupt("return",t.sent.delete("keyval",e));case 3:case"end":return t.stop()}}),t)})))()},I=function(){return Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v;case 2:return e.abrupt("return",e.sent.getAllKeys("keyval"));case 3:case"end":return e.stop()}}),e)})))()},M=b.create({baseURL:"https://socnet97.herokuapp.com/",headers:{"Content-type":"application/json"}});M.interceptors.request.use(function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("token");case 2:return(a=e.sent)?t.headers.Authorization="Bearer "+a:delete t.headers.Authorization,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){Promise.reject(e)}));var S=function(){return M.get("api/auth/me/")},F=function(e,t){return console.log(e,"    ",t),M.post("api/auth/login/",{username:e,password:t})},y=function(e){return M.get("api/profile/".concat(e,"/"))},j=function(e){return M.put("api/profile/",e)},N=function(){return M.delete("api/profile/")},w=function(e){return M.put("api/profile/status/",{status:e})},P=function(e){return M.put("api/profile/photo/",{photos:e})},U={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return console.log("api/users?page=".concat(e,"&q=").concat(t)),null===t?M.get("api/users?page=".concat(e)):M.get("api/users?page=".concat(e,"&q=").concat(t))},follow:function(e){return M.post("api/follow/".concat(e,"/"))},unfollow:function(e){return M.delete("api/follow/".concat(e,"/"))},getfollow:function(e){return M.get("api/follow/".concat(e,"/"))}},x={chatPut:function(e,t,a,r,n){var s={putType:a};return s[r]=n,M.put("api/chats/".concat(e,"/").concat(t,"/"),s)},getChats:function(e,t){return null===t?M.get("api/chats/?page=".concat(e)):M.get("api/chats/?page=".concat(e,"&query=").concat(t))},createChat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!==t?M.post("api/chats/create/",{snusers:e,name:t}):M.post("api/chats/create/",{snusers:e})},getChat:function(e,t){return M.get("api/chats/".concat(e,"/").concat(t,"/"))},deleteChat:function(e,t){return M.delete("api/chats/".concat(e,"/").concat(t,"/"))},clearChat:function(e,t,a,r){return this.chatPut(e,t,a,"clearType",r)},renameChat:function(e,t,a,r){return this.chatPut(e,t,a,"newChatName",r)},updateUnreadMsgs:function(e,t,a,r){return this.chatPut(e,t,a,"lastGlobalReadMsgId",r)},toogleMemberStatusForConversation:function(e,t,a,r){return this.chatPut(e,t,a,"userId",r)},addMemberForConversation:function(e,t,a,r){return this.chatPut(e,t,a,"userId",r)},removeMemberFromConversation:function(e,t,a,r){return this.chatPut(e,t,a,"userId",r)},removeMemberMsgsForConversation:function(e,t,a,r){return this.chatPut(e,t,a,"userId",r)},removeOneMemberMsgForConversation:function(e,t,a,r){return this.chatPut(e,t,a,"userId",r)},setChatPhoto:function(e,t,a,r){return this.chatPut(e,t,a,"newChatPhoto",r)},getMessages:function(e,t,a,r,n,s){return null===s?null===n?M.get("api/chats/".concat(e,"/").concat(t,"/messages/?readFromIndex=").concat(a,"&readFromIndexBefore=").concat(r)):M.get("api/chats/".concat(e,"/").concat(t,"/messages/?readFromIndex=").concat(a,"&readFromIndexBefore=").concat(r,"&query=").concat(n)):null===n?M.get("api/chats/".concat(e,"/").concat(t,"/messages/?readFromIndex=").concat(a,"&readFromIndexBefore=").concat(r,"&numOfDeletedMsgs=").concat(s)):M.get("api/chats/".concat(e,"/").concat(t,"/messages/?readFromIndex=").concat(a,"&readFromIndexBefore=").concat(r,"&query=").concat(n,"&numOfDeletedMsgs=").concat(s))},createMessage:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return M.post("api/chats/".concat(e,"/").concat(t,"/messages/create/"),{messageBody:a,fileId:r})},getFile:function(e){return M.get("api/files/".concat(e))},uploadFile:function(e,t){return M.post("api/files/",{fileURL:e,fileName:t})},editMessage:function(e,t,a,r){return console.log("api/chats/".concat(e,"/").concat(t,"/messages/").concat(a,"/")),console.log({newMessageBody:r}),M.put("api/chats/".concat(e,"/").concat(t,"/messages/").concat(a,"/"),{newMessageBody:r})},deleteMessage:function(e,t,a){return M.delete("api/chats/".concat(e,"/").concat(t,"/messages/").concat(a,"/"))}},k=a(17),T={userId:null,email:null,login:null,isAuth:!1},A=function(e,t,a,r){return{type:"my-app/auth/SET_USER_DATA",payload:{userId:e,email:t,login:a,isAuth:r}}},R=function(e){return[e.userId,e.email,e.login]},D=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e(A.apply(void 0,Object(g.a)(R(t)).concat([a])))},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"my-app/auth/SET_USER_DATA":return Object(p.a)(Object(p.a)({},e),t.payload);default:return e}},W=a(74),B=a.n(W),H=a(15),q=a(133),G=a.n(q),V=function(e){return n.a.createElement("header",{className:B.a.header},n.a.createElement("img",{src:G.a}),e.isAuth?n.a.createElement("div",{className:B.a.loginBlock},e.login," - ",n.a.createElement("a",{onClick:e.logout},"Logout")):n.a.createElement("div",{className:B.a.loginBlock},n.a.createElement(H.b,{to:"/login"},"Login")))},z=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement(V,this.props)}}]),a}(n.a.Component),K=Object(m.b)((function(e){return{login:e.auth.login,isAuth:e.auth.isAuth}}),{logout:function(){return function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("token");case 2:t(A(null,null,null,!1));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(z),J=a(24),X=a.n(J),Y=function(){return n.a.createElement("nav",{className:X.a.nav},n.a.createElement("div",{className:X.a.item},n.a.createElement(H.b,{to:"/profile",activeClassName:X.a.activeLink},"Profile")),n.a.createElement("div",{className:"".concat(X.a.item," ").concat(X.a.active)},n.a.createElement(H.b,{to:"/users",activeClassName:X.a.activeLink},"Users")),n.a.createElement("div",{className:"".concat(X.a.item," ").concat(X.a.active)},n.a.createElement(H.b,{to:"/chats",activeClassName:X.a.activeLink},"Chats")),n.a.createElement("div",{className:"".concat(X.a.item," ").concat(X.a.active)},n.a.createElement(H.b,{to:"/login",activeClassName:X.a.activeLink},"Login")))},Z=a(16),Q=a(11),$=a(10),ee=function(e){return{isAuth:e.auth.isAuth,userId:e.auth.userId}},te=function(e){var t=function(t){Object(u.a)(r,t);var a=Object(i.a)(r);function r(){return Object(o.a)(this,r),a.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return this.props.isAuth?n.a.createElement(e,this.props):n.a.createElement(Z.a,{to:"/login"})}}]),r}(n.a.Component);return Object(m.b)(ee)(t)},ae=function(e){return e=JSON.parse(e.replace(/'/g,'"'))},re=a(134),ne={chatId:null,chatTypeId:null,chatsAliases:[],messages:[],chats:[],currentChat:null,isFetching:!1,isUnmount:!1,membersToSelect:[],readFromIndex:null,readFromIndexNext:null,readFromIndexBefore:null,IsFetchingMsgs:!1,loadingFilesIds:[],windowScrollOnMsgCreate:!1,isMessageCreating:!1,isRefreshedAfterMC:!1,numOfDeletedMsgs:0},se=function(e){return{type:"SET_CURRENT_CHAT_MEMBERS",members:e}},ce=function(e){return{type:"SET_CURRENT_CHAT_NAME",name:e}},oe=function(e){return{type:"SET_CURRENT_CHAT_PHOTO",chatPhoto:e}},le=function(e,t,a){return{type:"SET_CURRENT_CHAT_DATA",chatId:t,chatTypeId:e,currentChat:a}},ue=function(e){return{type:"CURRENT_CHAT_DATA_FETCHING",isFetching:e}},ie=function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(r){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_("image-".concat(t),e);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()};function me(e,t,a){return console.log("url to file"+e),console.log(e),fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],t,{type:a})}))}var de=function(e){return{type:"SET_CHATS",chats:e}},fe=function(e){return{type:"SET_MESSAGES",messages:e}},he=function(e,t,a){return{type:"SET_READ_FROM_INDEXES",readFromIndex:e,readFromIndexNext:t,readFromIndexBefore:a}},ge=function(e){return{type:"SET_FETCHING_MSGS",IsFetchingMsgs:e}},pe=function(e){return{type:"SHOULD_WINDOW_SCROLL_DOWN",windowScrollOnMsgCreate:e}},be=function(e){return{type:"SET_MESSAGE_CREATING",isMessageCreating:e}},Ee=function(e){return{type:"SET_REFRESH_AFTER_MESSAGE_CREATING",isRefreshedAfterMC:e}},ve=function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(r){var n,s,c;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=parseInt(localStorage.getItem("chatId")),s=parseInt(localStorage.getItem("chatTypeId")),a.next=4,x.getChat(s,n);case 4:0===(c=a.sent).data.resultCode?r(e(c.data.data[t])):console.log("refreshCurrentChatData Error in getChat"+c.data.messages[0]);case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Ce=function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getChat(t.chatTypeId,t.id);case 2:if(0!==(a=e.sent).data.resultCode){e.next=11;break}return a.data.data.chatTypeId=t.chatTypeId,a.data.data.chatId=t.id,a.data.data.chatTimeStamp=t.chatTimeStamp,0===t.chatTypeId?a.data.data.chatType="dialog":a.data.data.chatType="conversation",e.abrupt("return",a.data.data);case 11:return console.log("getChat Error "+a.data.messages[0]),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return a=e.sent,e.abrupt("return",a.sort((function(e,t){return t.chatTimeStamp-e.chatTimeStamp})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(e,t,a){return e.map((function(e){return e[t]=t,e[a]=a,e}))},Oe=function(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return function(){var o=Object(h.a)(f.a.mark((function o(l){var u,i,m;return f.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return l(ge(!0)),c>0&&l({type:"NULL_NUM_OF_DELETED_MSGS"}),o.next=4,x.getMessages(e,t,a,r,n,c);case 4:if(0!==(u=o.sent).data.resultCode){o.next=15;break}return o.next=8,I();case 8:i=o.sent,m=_e(u.data.data.items,e,t).map((function(e){if(null!==e.fileId){var t="image-".concat(e.fileId);i.includes(t)&&(e.fileIDBKey=t)}return e})),l(fe(m)),m.length>0?l(he(m[0].id,u.data.data.readFromIndexNext,u.data.data.readFromIndexBefore)):l(he(a,u.data.data.readFromIndexNext,u.data.data.readFromIndexBefore)),s&&(l(pe(!1)),l(Ee(!0))),o.next=16;break;case 15:console.log("getMessages error "+u.data.messages[0]);case 16:l(ge(!1));case 17:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()},Ie=function(){var e=Object(h.a)(f.a.mark((function e(t,a,r,n,s){var c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.createMessage(t,a,r,n);case 2:0===(c=e.sent).data.resultCode?s(pe(!0)):(o=c.data.messages.length?c.data.messages[0]:"Some error",s(Object(k.b)("CreateMessage",{_error:o})));case 4:case"end":return e.stop()}}),e)})));return function(t,a,r,n,s){return e.apply(this,arguments)}}(),Me=["myLocal","myGlobal","allLocal","allGlobal"],Se=function(e,t,a,r){return function(){var n=Object(h.a)(f.a.mark((function n(s){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.clearChat(e,t,a,r);case 2:if(0!==(c=n.sent).data.resultCode){n.next=7;break}return n.abrupt("return",c.data.data.cleared);case 7:console.log("clearLocalChat deleted "+c.data.messages[0]);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Fe=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"clear",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Me[0];return Se(e,t,a,r)},ye=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"clear",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Me[1];return Se(e,t,a,r)},je=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"clear",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Me[2];return Se(e,t,a,r)},Ne=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"clear",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Me[3];return Se(e,t,a,r)},we=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"updateUnreadMsgs";return function(){var n=Object(h.a)(f.a.mark((function n(s){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.updateUnreadMsgs(e,t,r,a);case 2:return 0===(c=n.sent).data.resultCode?console.log("updateUnreadMsgs updated"):console.log("updateUnreadMsgs error"),n.abrupt("return",c);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Pe=function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(r){var n,s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,x.createChat(e,t);case 3:0===(n=a.sent).data.resultCode?console.log("createChatRequest created: "+n.data.data.created):(console.log("createChatRequest error"),s=n.data.messages.length?n.data.messages[0]:"Some error",r(Object(k.b)("CreateChat",{_error:s})));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Ue=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rename";return function(){var n=Object(h.a)(f.a.mark((function n(s){var c,o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.renameChat(e,t,r,a);case 2:0===(c=n.sent).data.resultCode?(console.log("chat renamed:"+c.data.data.renamed),s(ve(ce,"name"))):(o=c.data.messages.length?c.data.messages[0]:"Some error",s(Object(k.b)("renameChat",{_error:o})));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},xe=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"addMember";return function(){var n=Object(h.a)(f.a.mark((function n(s){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("adding member"),console.log(e,t,a),n.next=4,Te(e,t,a,r,x.addMemberForConversation.bind(x),"member added: ","memberAdded","addMember error: ",s,se,"members");case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ke=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"setChatPhoto";return function(){var n=Object(h.a)(f.a.mark((function n(s){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Te(e,t,a,r,x.setChatPhoto.bind(x),"chat photo changed: ","isChatPhotoChanged","setChatPhotoRequest error: ",s,oe,"chatPhoto");case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Te=function(){var e=Object(h.a)(f.a.mark((function e(t,a,r,n,s,c,o,l){var u,i,m,d,h,g=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=g.length>8&&void 0!==g[8]?g[8]:null,i=g.length>9&&void 0!==g[9]?g[9]:null,m=g.length>10&&void 0!==g[10]?g[10]:null,e.next=5,s(t,a,n,r);case 5:return 0===(d=e.sent).data.resultCode?(console.log(c+d.data.data[o]),i&&u(ve(i,m))):(h=d.data.messages.length?d.data.messages[0]:"Some error",console.log(l+h)),e.abrupt("return",d);case 8:case"end":return e.stop()}}),e)})));return function(t,a,r,n,s,c,o,l){return e.apply(this,arguments)}}(),Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INC_NUM_OF_DELETED_MSGS":var a=e.numOfDeletedMsgs+1;return Object(p.a)(Object(p.a)({},e),{},{numOfDeletedMsgs:a});case"NULL_NUM_OF_DELETED_MSGS":var r=0;return Object(p.a)(Object(p.a)({},e),{},{numOfDeletedMsgs:r});case"SET_CHATS":return Object(p.a)(Object(p.a)({},e),{},{chats:t.chats});case"SET_CHATS_ALIAS_MAP":return Object(p.a)(Object(p.a)({},e),{},{chatsAliases:t.chatsAliases});case"SET_MESSAGES":return Object(p.a)(Object(p.a)({},e),{},{messages:t.messages});case"SET_CURRENT_CHAT_DATA":return Object(p.a)(Object(p.a)({},e),{},{chatId:t.chatId,chatTypeId:t.chatTypeId,currentChat:t.currentChat});case"TOOGLE_IS_UNMOUNT":return Object(p.a)(Object(p.a)({},e),{},{isUnmount:t.isUnmount});case"CURRENT_CHAT_DATA_FETCHING":return Object(p.a)(Object(p.a)({},e),{},{isFetching:t.isFetching});case"SET_CURRENT_CHAT_MEMBERS":return Object(p.a)(Object(p.a)({},e),{},{currentChat:Object(p.a)(Object(p.a)({},e.currentChat),{},{members:t.members})});case"SET_CURRENT_CHAT_NAME":return Object(p.a)(Object(p.a)({},e),{},{currentChat:Object(p.a)(Object(p.a)({},e.currentChat),{},{name:t.name})});case"SET_CURRENT_CHAT_PHOTO":return Object(p.a)(Object(p.a)({},e),{},{currentChat:Object(p.a)(Object(p.a)({},e.currentChat),{},{chatPhoto:t.chatPhoto})});case"SET_READ_FROM_INDEXES":return Object(p.a)(Object(p.a)({},e),{},{readFromIndex:t.readFromIndex,readFromIndexNext:t.readFromIndexNext,readFromIndexBefore:t.readFromIndexBefore});case"SET_FETCHING_MSGS":return Object(p.a)(Object(p.a)({},e),{},{IsFetchingMsgs:t.IsFetchingMsgs});case"SHOULD_WINDOW_SCROLL_DOWN":return Object(p.a)(Object(p.a)({},e),{},{windowScrollOnMsgCreate:t.windowScrollOnMsgCreate});case"SET_MESSAGE_CREATING":return Object(p.a)(Object(p.a)({},e),{},{isMessageCreating:t.isMessageCreating});case"SET_REFRESH_AFTER_MESSAGE_CREATING":return Object(p.a)(Object(p.a)({},e),{},{isRefreshedAfterMC:t.isRefreshedAfterMC});case"SET_IDB_KEY_IN_MESSAGE":return Object(p.a)(Object(p.a)({},e),{},{messages:t.idbFileMessageKey});case"EDIT_MESSAGE":return Object(p.a)(Object(p.a)({},e),{},{messages:e.messages.map((function(e){return e.id===t.messageId?Object(p.a)(Object(p.a)({},e),{},{body:t.newMessageBody}):e}))});default:return e}},Re=a(135),De=a.n(Re),Le=a(136),We=a.n(Le),Be=function(e){return n.a.createElement("div",{className:We.a.container},n.a.createElement("img",{src:De.a}))},He=a(26),qe=a(6),Ge=a.n(qe),Ve=a(5),ze=a.n(Ve),Ke=function(e){if(!e)return"";var t=new Date(1e3*e),a=t.getHours()<10?"0".concat(t.getHours()):t.getHours(),r=t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes();return"".concat(a,":").concat(r)},Je=a(18),Xe=a.n(Je),Ye=a(128),Ze=function(e){e.input;var t=e.meta,a=t.touched,r=t.error,s=t.warning,c=e.children,o=a&&r,l=a&&s;return n.a.createElement("div",{className:Xe.a.formControl+" "+(o?Xe.a.error:"")+" "+(l?Xe.a.warning:"")},c,o&&n.a.createElement("span",null,r)||l&&n.a.createElement("span",null,s))},Qe=function(e){var t=e.input,a=(e.meta,e.child,Object(He.a)(e,["input","meta","child"]));return console.log(a.onCTRLEnt),n.a.createElement(Ze,e,n.a.createElement("textarea",Object.assign({},t,a,{onKeyUp:a.onCTRLEnt})))},$e=function(e){var t=e.input,a=(e.meta,e.child,Object(He.a)(e,["input","meta","child"]));return n.a.createElement(Ze,e,n.a.createElement("input",Object.assign({},t,a)))},et=function(e){var t=e.input,a=(e.meta,e.child,Object(He.a)(e,["input","meta","child"]),function(e){return new Promise((function(t,a){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return a(e)}}))}),r=function(){var t=Object(h.a)(f.a.mark((function t(r){var n,s,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.input,!(s=r.target.files[0])){t.next=9;break}return t.next=5,a(s);case 5:c=t.sent,n.onChange({fileURL:c,fileName:s.name}),t.next=10;break;case 9:n.onChange(null);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=t.value?t.value.name:+new Date;return n.a.createElement("input",{key:s,type:"file",onChange:r})},tt=function(e,t,a,r){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return n.a.createElement("div",{className:""},n.a.createElement(Ye.a,Object.assign({placeholder:e,name:t,component:a,validate:r},s)),c)},at=(n.a.Component,function(e){var t=e.pristine,a=e.reset,r=e.submitting,s=e.error,c=e.sumbitButtonName;return n.a.createElement(n.a.Fragment,null,s&&n.a.createElement("div",{className:Xe.a.formSummaryError},s),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"submit",disabled:t||r},c)),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"button",disabled:t||r,onClick:a},"Clear")))}),rt=function(e){if(!e)return"Field is required"},nt=function(e){return function(t){return t&&t.length>e?"Value must be no longer then ".concat(e," symbols"):void 0}},st=(nt(10),nt(30)),ct=nt(50),ot=nt(200),lt=nt(1e3),ut=a(129),it=function(e){return e=JSON.stringify(e).replace(/"/g,"'")},mt=function(e,t,a,r){return e.map((function(e){return e[a]===t?Object(p.a)(Object(p.a)({},e),r):e}))},dt={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[],query:""},ft=function(e){return{type:"SET_QUERY",query:e}},ht=function(e,t){return{type:"FOLLOW_UNFOLLOW",userId:e,userRelation:t}},gt=function(e){return{type:"SET_USERS",users:e}},pt=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},bt=function(e){return{type:"SET_TOTAL_USERS_COUNT",count:e}},Et=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},vt=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},Ct=function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(r){var n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(Et(!0)),r(pt(e)),a.next=4,U.getUsers(e,t);case 4:n=a.sent,r(Et(!1)),r(gt(n.data.users.items)),r(bt(n.data.users.totalCount));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},_t=function(){var e=Object(h.a)(f.a.mark((function e(t,a,r,n){var s,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(vt(!0,a)),e.next=3,r(a);case 3:if(0!==(s=e.sent).data.resultCode&&""!==s.data){e.next=9;break}return e.next=7,U.getfollow(a);case 7:0===(c=e.sent).data.resultCode&&t(n(a,c.data.data.userRelation));case 9:t(vt(!1,a));case 10:case"end":return e.stop()}}),e)})));return function(t,a,r,n){return e.apply(this,arguments)}}(),Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUERY":return Object(p.a)(Object(p.a)({},e),{},{query:t.query});case"FOLLOW_UNFOLLOW":return Object(p.a)(Object(p.a)({},e),{},{users:mt(e.users,t.userId,"userId",{userRelation:t.userRelation})});case"SET_USERS":return Object(p.a)(Object(p.a)({},e),{},{users:t.users});case"SET_CURRENT_PAGE":return Object(p.a)(Object(p.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(p.a)(Object(p.a)({},e),{},{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(p.a)(Object(p.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":var a=Object(p.a)(Object(p.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(g.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});return a;default:return e}},It=a(95),Mt=a.n(It),St=a(138),Ft=a.n(St),yt=function(e){var t=e.user,a=e.followingInProgress,r=e.unfollow,s=e.follow;return console.log(t),n.a.createElement("div",null,n.a.createElement("span",null,n.a.createElement("div",null,n.a.createElement(H.b,{to:"/profile/"+t.userId},n.a.createElement("img",{src:null!=t.photos.small?t.photos.small:Ft.a,className:Mt.a.userPhoto}))),n.a.createElement("div",null,"subscription"===t.userRelation||"friend"===t.userRelation?n.a.createElement("button",{disabled:a.some((function(e){return e===t.userId})),onClick:function(){r(t.userId)}},"Unfollow"):n.a.createElement("button",{disabled:a.some((function(e){return e===t.userId})),onClick:function(){s(t.userId)}},"Follow"))),n.a.createElement("span",null,n.a.createElement("span",null,n.a.createElement("div",null,t.name),n.a.createElement("div",null,t.status))))},jt=function(e){var t=e.user,a=e.setSelectedForChatUsers,r=e.setSelectedForChatUser,s=e.selectedForChatUsers,c=e.chatUsersIds;e.styleForUser,Object(He.a)(e,["user","setSelectedForChatUsers","setSelectedForChatUser","selectedForChatUsers","chatUsersIds","styleForUser"]);return n.a.createElement("div",null,n.a.createElement(H.b,{to:"/profile/"+t.userId},n.a.createElement("div",null,t.name),n.a.createElement("div",{className:Mt.a.userChoosePhoto},n.a.createElement("img",{src:t.photos.small,alt:"Ava"}))),s?s.includes(t.userId)?n.a.createElement("a",{onClick:function(){a(s.filter((function(e){return e!==t.userId})))}},"Remove User"):n.a.createElement("a",{onClick:function(){a([].concat(Object(g.a)(s),[t.userId]))}},"Add User"):c.includes(t.userId)?n.a.createElement("div",{style:{color:"blue"}},"Chat Member"):n.a.createElement("a",{onClick:function(){r(t.userId),console.log("after that should run inner function of useUserReducer "+t.userId)}},"Add Member"))},Nt=a(45),wt=a(75),Pt=a.n(wt),Ut=a(139),xt=a.n(Ut),kt=function(e){for(var t=e.totalItemsCount,a=e.pageSize,s=e.currentPage,c=e.onPageChanged,o=e.portionSize,l=void 0===o?10:o,u=Math.ceil(t/a),i=[],m=1;m<=u;m++)i.push(m);var d=Math.ceil(u/l),f=Object(r.useState)(1),h=Object(Q.a)(f,2),g=h[0],p=h[1],b=(g-1)*l+1,E=g*l;return n.a.createElement("div",{className:Pt.a.paginator},g>1&&n.a.createElement("button",{onClick:function(){return p(g-1)}},"PREV"),i.filter((function(e){return e>=b&&e<=E})).map((function(e){return n.a.createElement("span",{className:xt()(Object(Nt.a)({},Pt.a.selectedPage,s===e),Pt.a.pageNumber),key:e,onClick:function(t){c(e)}},e)})),d>g&&n.a.createElement("button",{onClick:function(){return p(g+1)}},"NEXT"))},Tt=function(e){var t=e.currentPage,a=e.totalUsersCount,r=e.pageSize,s=e.onPageChanged,c=e.users,o=e.forChat,l=void 0!==o&&o,u=e.setSelectedForChatUsers,i=e.setSelectedForChatUser,m=e.chatUsersIds,d=e.selectedForChatUsers,f=(e.styleForUsers,e.styleForUser),h=Object(He.a)(e,["currentPage","totalUsersCount","pageSize","onPageChanged","users","forChat","setSelectedForChatUsers","setSelectedForChatUser","chatUsersIds","selectedForChatUsers","styleForUsers","styleForUser"]);return n.a.createElement("div",null,n.a.createElement(kt,{currentPage:t,onPageChanged:s,totalItemsCount:a,pageSize:r}),n.a.createElement("div",null,c.map((function(e){return l?n.a.createElement(jt,{user:e,setSelectedForChatUsers:u,setSelectedForChatUser:i,selectedForChatUsers:d,styleForUser:f,chatUsersIds:m,fWAUFC:h.fWAUFC,clearCurrentFocusedWindow:h.clearCurrentFocusedWindow,key:e.id}):n.a.createElement(yt,{user:e,followingInProgress:h.followingInProgress,key:e.id,unfollow:h.unfollow,follow:h.follow})}))))},At=a(49),Rt=Object(At.a)((function(e){return e.usersPage.users}),(function(e){return e.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{photos:ae(e.photos)})}))})),Dt=function(e){return e.usersPage.query},Lt=function(e){return e.usersPage.pageSize},Wt=function(e){return e.usersPage.totalUsersCount},Bt=function(e){return e.usersPage.currentPage},Ht=function(e){return e.usersPage.isFetching},qt=function(e){return e.usersPage.followingInProgress},Gt=Object(ut.a)({form:"UsersSearch"})((function(e){var t=e.handleSubmit,a=e.pristine,r=e.reset,s=e.submitting,c=e.error,o=e.query;return n.a.createElement("form",{onSubmit:t,autoComplete:"off"},tt(o,"search",$e,[ct],{defaultValue:""}),c&&n.a.createElement("div",{className:Xe.a.formSummaryError},c),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"submit",disabled:s},"Run")),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"button",disabled:a||s,onClick:r},"Clear Values")))})),Vt=Object(m.b)((function(e){return{currentPage:Bt(e),query:Dt(e)}}),{searchUsers:Ct,setQuery:ft})((function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:""},n.a.createElement("label",{htmlFor:""},"SEARCH: "),n.a.createElement(Gt,{onSubmit:function(t){e.setQuery(t.search),e.searchUsers(e.currentPage,t.search)}})))})),zt=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onPageChanged=function(t){""===e.props.query?e.props.getUsers(t,e.props.pageSize):e.props.searchUsers(t,e.props.query)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){""===this.props.query?this.props.getUsers(this.props.currentPage,this.props.pageSize):this.props.searchUsers(this.props.currentPage,this.props.query)}},{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){this.props.setQuery("")}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:this.props.styleForUsers?this.props.styleForUsers:""},this.props.isFetching?n.a.createElement(Be,null):null,n.a.createElement("div",null,n.a.createElement(Vt,null)),0===this.props.fWUFCID?n.a.createElement("a",{onClick:function(){return e.props.clearCurrentFocusedWindow(e.props.fWUFCID)}},"End Selection"):null,n.a.createElement(Tt,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress,forChat:this.props.forChat,setSelectedForChatUsers:this.props.setSelectedForChatUsers,setSelectedForChatUser:this.props.setSelectedForChatUser,chatUsersIds:this.props.chatUsersIds,fWAUFC:this.props.fWAUFC,clearCurrentFocusedWindow:this.props.clearCurrentFocusedWindow,selectedForChatUsers:this.props.selectedForChatUsers,styleForUsers:this.props.styleForUsers,styleForUser:this.props.styleForUser}))}}]),a}(n.a.Component),Kt=Object($.d)(Object(m.b)((function(e){return{users:Rt(e),pageSize:Lt(e),totalUsersCount:Wt(e),currentPage:Bt(e),isFetching:Ht(e),followingInProgress:qt(e),query:Dt(e)}}),{follow:function(e){return function(t){_t(t,e,U.follow.bind(U),ht)}},unfollow:function(e){return function(t){_t(t,e,U.unfollow.bind(U),ht)}},setCurrentPage:pt,toggleFollowingProgress:vt,getUsers:function(e,t){return function(){var t=Object(h.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Et(!0)),a(pt(e)),t.next=4,U.getUsers(e);case 4:r=t.sent,a(Et(!1)),a(gt(r.data.users.items)),a(bt(r.data.users.totalCount));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},searchUsers:Ct,setQuery:ft}))(zt),Jt=Object(ut.a)({form:"chageChatPhoto"})((function(e){var t=e.handleSubmit,a=e.pristine,r=e.reset,s=e.submitting,c=e.error,o=e.msgStyle;return n.a.createElement("form",{onSubmit:t,className:"".concat(o),autoComplete:"off"},tt("Photo","photo",$e,[lt]),n.a.createElement(at,{pristine:a,reset:r,submitting:s,error:c,sumbitButtonName:"Change Photo"}))})),Xt=function(e){var t=e.setChatPhotoRequest,a=e.chatTypeId,r=e.chatId,s=e.msgStyle,c=void 0===s?"":s;return n.a.createElement(Jt,{onSubmit:function(e){var n=it({large:null,small:e.photo});t(a,r,n)},msgStyle:c})},Yt=Object(ut.a)({form:"renameChat"})((function(e){var t=e.handleSubmit,a=e.pristine,r=e.reset,s=e.submitting,c=e.error,o=e.msgStyle;return n.a.createElement("form",{onSubmit:t,className:"".concat(o),autoComplete:"off"},tt("Name","name",$e,[ot]),n.a.createElement(at,{pristine:a,reset:r,submitting:s,error:c,sumbitButtonName:"Rename Chat"}))})),Zt=function(e){var t=e.renameChatRequest,a=e.chatTypeId,r=e.chatId,s=e.msgStyle,c=void 0===s?"":s;return n.a.createElement(Yt,{onSubmit:function(e){t(a,r,e.name)},msgStyle:c})},Qt=function(e){var t=e.member,a=e.memberStyle,r=e.chatMemberSettings,s=void 0===r?null:r,c=e.setMemberOperShow,o=void 0===c?null:c,l=e.setSelectedMember,u=void 0===l?null:l;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:a},n.a.createElement(H.b,{to:"/profile/"+t.id},n.a.createElement("div",{className:Ge.a.memberName},t.name),n.a.createElement("div",{className:Ge.a.memberPhoto},n.a.createElement("img",{src:t.photos.small,alt:"Ava"}))),s?n.a.createElement("a",{className:s,onClick:function(e){u(t.id),o(e)}},"Operations"):null))},$t=function(e){var t=e.members,a=e.membersShow,r=e.memberOperShow,s=e.selectedMember,c=e.memberOpers;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:a?ze.a.chatsMembersActive:ze.a.chatsMembers},n.a.createElement("div",{className:a?ze.a.chatsMembersActive:ze.a.chatsMembers},t)),n.a.createElement("div",{className:"".concat(r?ze.a.smthElseListActive:Ge.a.smthElseList)},c.map((function(e){return n.a.createElement("div",{className:"".concat(ze.a.subElemMSBs," ").concat(ze.a.infoItemMSBs)},n.a.createElement("a",{className:"".concat(ze.a.membOperLink),onClick:e.method(s)},e.name))}))))},ea=function(e){return n.a.createElement("div",{className:Ge.a.getMemberList,onClick:function(e){e.stopPropagation()}},n.a.createElement(Kt,{setSelectedForChatUser:function(t){console.log("pre api"),e.addMember(e.chatTypeId,e.chatId,t)},forChat:!0,styleForUsers:ze.a.usersForChatActive,styleForUser:ze.a.userForChat,fWAUFC:e.fWAUFC,clearCurrentFocusedWindow:e.clearCurrentFocusedWindow,chatUsersIds:e.chatUsersIds}))},ta=function(e){var t=e.sended,a=e.body,r=e.authorName;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:Ge.a.chatLMAuthorName},r," "),n.a.createElement("div",{className:Ge.a.chatLMAuthorNameDotted},":"),n.a.createElement("div",{className:Ge.a.chatLMBody},a),n.a.createElement("div",{className:Ge.a.chatLMSended},Ke(t)))},aa=function(e){var t=e.lastMessage,a=e.getCountOfNewGlobalMsgs,r=e.members,s=e.chatType,c=e.name,o=e.setCurrentChatData,l=e.chatTypeId,u=e.chatId,i=e.chatPhotoSmall,m=e.isFetching,d=e.clearChatMyLocal,f=e.clearChatMyGlobal,h=e.clearChatAllLocal,g=e.clearChatAllGlobal,p=e.renameChatRequest,b=e.deleteChatRequest,E=e.addMember,v=e.setChatPhotoRequest,C=Object(He.a)(e,["lastMessage","getCountOfNewGlobalMsgs","members","chatType","name","setCurrentChatData","chatTypeId","chatId","chatPhotoSmall","isFetching","clearChatMyLocal","clearChatMyGlobal","clearChatAllLocal","clearChatAllGlobal","renameChatRequest","deleteChatRequest","addMember","setChatPhotoRequest"]),_=function(e){e(l,u)},O="/chats/".concat(s,"/").concat(c,"/"),I=r.map((function(e){return e.id}));return r=r.map((function(e){return n.a.createElement(Qt,{member:e,key:e.id,memberStyle:"".concat(Ge.a.member," ").concat(Ge.a.subElem2)})})),m?n.a.createElement(Be,null):n.a.createElement(n.a.Fragment,null,null!==C.fWAUFC.data&&C.fWAUFC.data[1]===u&&C.fWAUFC.data[0]===l&&n.a.createElement("div",{className:Ge.a.addMember},n.a.createElement("div",{className:Ge.a.addMemberHeader},n.a.createElement(ea,{addMember:E,chatTypeId:l,chatId:u,chatUsersIds:I,clearCurrentFocusedWindow:C.clearCurrentFocusedWindow,fWAUFC:C.fWAUFC}))),n.a.createElement("div",{className:Ge.a.chatItem},n.a.createElement(H.b,{to:O,className:Ge.a.chatItemData,onClick:function(){o(l,u)}},n.a.createElement("div",{className:Ge.a.chatItemPhoto},null!==i?n.a.createElement("img",{src:i}):n.a.createElement("div",{className:""},"chatPhotoSmall")),Object.keys(t).length>0?n.a.createElement(ta,{sended:t.sended,body:t.body,key:t.id,authorName:t.authorName}):null,n.a.createElement("div",{className:Ge.a.chatItemNewMsgsNum},a),n.a.createElement("div",{className:Ge.a.chatItemName},c)),n.a.createElement("div",{className:Ge.a.chatSettings},"Settings:",n.a.createElement("div",{className:Ge.a.chatSettingsHeader},n.a.createElement("div",{className:Ge.a.chatSettingsMembersListHeader},"members:",n.a.createElement("div",{className:Ge.a.chatSettingsMembersList},r)),n.a.createElement("div",{className:Ge.a.smthElseHeader},"clear chat:",n.a.createElement("div",{className:Ge.a.smthElseList},n.a.createElement("div",{className:"".concat(Ge.a.subElem," ").concat(Ge.a.infoItem)},n.a.createElement("button",{onClick:function(){return _(d)}},"Clear My Messages Locally")),n.a.createElement("div",{className:"".concat(Ge.a.subElem," ").concat(Ge.a.infoItem)},n.a.createElement("button",{onClick:function(){return _(f)}},"Clear My Messages Globally")),n.a.createElement("div",{className:"".concat(Ge.a.subElem," ").concat(Ge.a.infoItem)},n.a.createElement("button",{onClick:function(){return _(h)}},"Clear All Messages Locally")),n.a.createElement("div",{className:"".concat(Ge.a.subElem," ").concat(Ge.a.infoItem)},n.a.createElement("button",{onClick:function(){return _(g)}},"Clear All Messages Globally")))),n.a.createElement("div",{className:Ge.a.renameChatHeader},"rename",1===l&&n.a.createElement("div",{className:Ge.a.renameChatItem},n.a.createElement(Zt,{renameChatRequest:p,chatTypeId:l,chatId:u}))),n.a.createElement("div",{className:Ge.a.smthElseHeader},"other operations",n.a.createElement("div",{className:Ge.a.smthElseList},n.a.createElement("div",{className:"".concat(Ge.a.subElem," ").concat(Ge.a.infoItem)},"set photo",1===l&&n.a.createElement("div",{className:Ge.a.changePhotoChat},n.a.createElement(Xt,{setChatPhotoRequest:v,chatTypeId:l,chatId:u}))),n.a.createElement("div",{className:"".concat(Ge.a.subElem," ").concat(Ge.a.infoItem)},1===l&&n.a.createElement("div",{className:Ge.a.addMemberItem},null===C.fWAUFC.data&&n.a.createElement("a",{onClick:function(e){return e.stopPropagation(),C.addFocusedWindow(C.fWAUFC.id,[l,u])}},"Add Member"))),n.a.createElement("div",{className:"".concat(Ge.a.deleteChat," ").concat(Ge.a.subElem," ").concat(Ge.a.infoItem)},n.a.createElement("button",{onClick:function(){return _(b)}},"DELETE CHAT"))))))))},ra=Object(At.a)((function(e){return e.chatsPage.chats}),(function(e){return e.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{members:e.members.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{photos:ae(e.photos)})})),chatPhoto:ae(e.chatPhoto)})}))})),na=function(e){return e.chatsPage.messages},sa=function(e){return e.chatsPage.chatTypeId},ca=function(e){return e.chatsPage.chatId},oa=Object(At.a)((function(e){return e.chatsPage.currentChat}),(function(e){return null!==e?Object(p.a)(Object(p.a)({},e),{},{members:e.members.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{photos:ae(e.photos)})})),chatPhoto:ae(e.chatPhoto)}):null})),la=function(e){return e.app.focusedWindows},ua=function(e){return e.app.focusedWindowsIds},ia=function(e){return Object(At.a)(la,ua,(function(t,a){return t.find((function(t){return t.id===a[e]}))||{id:a[e],data:null}}))},ma=ia("fWUsersFCId"),da=ia("fWAddUserFCId"),fa=ia("fWMembersId"),ha=ia("fWMemberOperationsId"),ga=(a(295),{initialized:!1,focusedWindows:[],focusedWindowsIds:{fWUsersFCId:0,fWAddUserFCId:1,fWMembersId:2,fWMemberOperationsId:3}}),pa=function(e,t){return{type:"SET_FOCUSED_WINDOWS",newFocusedWindow:{id:e,data:t}}},ba=function(e){return{type:"CLEAR_CURRENT_FOCUSED_WINDOW",currentWindowId:e}},Ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{initialized:!0});case"SET_FOCUSED_WINDOWS":return Object(p.a)(Object(p.a)({},e),{},{focusedWindows:[].concat(Object(g.a)(e.focusedWindows),[t.newFocusedWindow])});case"CLEAR_FOCUSED_WINDOWS":return Object(p.a)(Object(p.a)({},e),{},{focusedWindows:[]});case"CLEAR_CURRENT_FOCUSED_WINDOW":return Object(p.a)(Object(p.a)({},e),{},{focusedWindows:e.focusedWindows.filter((function(e){return e.id!==t.currentWindowId}))});default:return e}},va=Object(ut.a)({form:"CreateChat"})((function(e){var t=e.handleSubmit,a=e.pristine,r=e.reset,s=e.submitting,c=e.error;return n.a.createElement("form",{onSubmit:t,className:Ge.a.createChatForm,autoComplete:"off"},tt("Name","name",$e,[ot]),n.a.createElement(at,{pristine:a,reset:r,submitting:s,error:c,sumbitButtonName:"Create Chat"}))})),Ca=Object($.d)(te,Object(m.b)((function(e){return{chats:ra(e),isAuth:e.auth.isAuth,isFetching:e.chatsPage.isFetching,isUnmount:e.chatsPage.isUnmount,myUserId:e.auth.userId,OLDsnusers:e.chatsPage.usersToSelect,fWUFC:ma(e),fWAUFC:da(e),fWMFC:fa(e),fWMOFC:ha(e)}}),{getChats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){var a=Object(h.a)(f.a.mark((function a(r){var n,s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.getChats(e,t);case 2:if(0!==(n=a.sent).data.resultCode){a.next=10;break}return a.next=6,Ce(n.data.data.chats.items);case 6:s=a.sent,r(de(s)),a.next=11;break;case 10:console.log("getChats error "+n.data.messages[0]);case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},setCurrentChatData:function(e,t){return function(a){a(ue(!0)),localStorage.setItem("chatTypeId",e),localStorage.setItem("chatId",t),a(ue(!1))}},unSetCurrentChatData:function(){return function(e){delete localStorage.chatId,delete localStorage.chatTypeId,e(le(null,null,null))}},clearChatMyLocal:Fe,clearChatMyGlobal:ye,clearChatAllLocal:je,clearChatAllGlobal:Ne,createDialog:function(e){return Pe(e,null)},createConversation:function(e,t){return Pe(e,t)},renameChatRequest:Ue,addMember:xe,setChatPhotoRequest:ke,deleteChatRequest:function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(r){var n,s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.deleteChat(e,t);case 2:""===(n=a.sent).data?console.log("chat succ deleted"):(s=n.data.messages.length?n.data.messages[0]:"Some error",console.log("deleteChatRequest error: "+s));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},addFocusedWindow:pa,clearCurrentFocusedWindow:ba}),Z.f)((function(e){var t=Object(r.useState)(!0),a=Object(Q.a)(t,2),s=a[0],c=a[1],o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=Object(r.useState)([]),n=Object(Q.a)(a,2),s=n[0],c=n[1],o=function(a){e.apply(void 0,[s].concat(Object(g.a)(t.map((function(e){return a[e]})))))};return[s,c,o]}(e.createConversation,["name"]),l=Object(Q.a)(o,3),u=l[0],i=l[1],m=l[2];if(Object(r.useEffect)((function(){(function(){var t=Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=5;break}return e.unSetCurrentChatData(),t.next=4,e.getChats();case 4:c(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e,s]),Object(r.useEffect)((function(){console.log("start refresh"),setTimeout(Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getChats();case 2:case"end":return t.stop()}}),t)}))),5e3),console.log("end refresh"),console.log("effect refresh used by changing: ")}),[e]),s)return n.a.createElement(Be,null);var d=e.chats.map((function(t){return n.a.createElement(aa,{lastMessage:t.lastMessage,getCountOfNewGlobalMsgs:t.getCountOfNewGlobalMsgs,members:t.members,name:t.name,chatType:t.chatType,chatId:t.chatId,chatTypeId:t.chatTypeId,key:t.id,setCurrentChatData:e.setCurrentChatData,chatPhotoSmall:t.chatPhoto.small,isFetching:e.isFetching,clearChatMyLocal:e.clearChatMyLocal,clearChatMyGlobal:e.clearChatMyGlobal,clearChatAllLocal:e.clearChatAllLocal,clearChatAllGlobal:e.clearChatAllGlobal,renameChatRequest:e.renameChatRequest,setChatPhotoRequest:e.setChatPhotoRequest,addMember:e.addMember,deleteChatRequest:e.deleteChatRequest,fWAUFC:e.fWAUFC,clearCurrentFocusedWindow:e.clearCurrentFocusedWindow,addFocusedWindow:e.addFocusedWindow})}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:Ge.a.chats},n.a.createElement("div",{className:Ge.a.chats_header},"Chats"),n.a.createElement("div",{className:Ge.a.createChat},n.a.createElement("div",{className:Ge.a.createChatHeader},"Create Conversation",u.length>1&&n.a.createElement(va,{onSubmit:m,snusers:e.snusers,myUserId:e.myUserId}),null!==e.fWUFC.data?n.a.createElement("div",{className:Ge.a.getMemberList,onClick:function(e){e.stopPropagation()}},n.a.createElement(Kt,{setSelectedForChatUsers:i,forChat:!0,selectedForChatUsers:u,styleForUsers:ze.a.usersForChatActive,styleForUser:ze.a.userForChat,clearCurrentFocusedWindow:e.clearCurrentFocusedWindow,fWUFCID:e.fWUFC.id,toogleFocuseElem:e.toogleFocuseElem}),1===u.length&&n.a.createElement("a",{onClick:function(){e.createDialog(u[0]),e.clearCurrentFocusedWindow(e.fWUFC.id)}},"Create Dialog")):n.a.createElement("a",{className:Ge.a.getMemberList,onClick:function(t){t.stopPropagation(),e.addFocusedWindow(e.fWUFC.id,!0)}},"Choose Users for Chat"))),n.a.createElement("div",{className:Ge.a.chatsItems},d)))})),_a={posts:[{id:1,message:"Hi, how are you?",likesCount:12},{id:2,message:"It's my first post",likesCount:11},{id:3,message:"Blabla",likesCount:11},{id:4,message:"Dada",likesCount:11}],profile:null,status:""},Oa=function(e){return{type:"SET_USER_PROFILE",profile:e}},Ia=function(e){return{type:"SET_STATUS",status:e}},Ma=function(e){return{type:"UPDATE_USER_PROFILE",profileData:e}},Sa=function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var r,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:0===(r=t.sent).data.resultCode&&((n=r.data.data).photos=ae(n.photos),n.contacts=ae(n.contacts),a(Oa(n)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Fa=function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var r,n,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(e);case 2:0===(r=t.sent).data.resultCode?("photos"in(n=r.data.data)&&(n.photos=ae(n.photos)),"contacts"in n&&(n.contacts=ae(n.contacts)),a(Ma(n))):(s=r.data.messages.length?r.data.messages[0]:"Some error",a(Object(k.b)("updateProfile",{_error:s})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ya=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var a={id:5,message:t.newPostText,likesCount:0};return Object(p.a)(Object(p.a)({},e),{},{posts:[].concat(Object(g.a)(e.posts),[a])});case"DELETE_POST":return Object(p.a)(Object(p.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case"SET_USER_PROFILE":return Object(p.a)(Object(p.a)({},e),{},{profile:t.profile});case"UPDATE_USER_PROFILE":return Object(p.a)(Object(p.a)({},e),{},{profile:Object(p.a)(Object(p.a)(Object(p.a)({},e.profile),t.profileData),{},{photos:Object(p.a)(Object(p.a)({},e.profile.photos),t.profileData.photos),contacts:Object(p.a)(Object(p.a)({},e.profile.contacts),t.profileData.contacts)})});case"SET_STATUS":return Object(p.a)(Object(p.a)({},e),{},{profile:Object(p.a)(Object(p.a)({},e.profile),{},{status:t.status})});case"SET_PHOTO":return Object(p.a)(Object(p.a)({},e),{},{profile:Object(p.a)(Object(p.a)({},e.profile),{},{photos:t.photos})});default:return e}},ja=a(59),Na=a.n(ja),wa=a(42),Pa=a.n(wa),Ua=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=Object(r.useState)(!1),c=Object(Q.a)(s,2),o=c[0],l=c[1],u=Object(r.useState)(e),i=Object(Q.a)(u,2),m=i[0],d=i[1],f=Object(r.useState)(!1),h=Object(Q.a)(f,2),g=h[0],p=h[1],b=Object(r.useState)("".concat(e.length,"/").concat(n)),E=Object(Q.a)(b,2),v=E[0],C=E[1];Object(r.useEffect)((function(){d(e)}),[e]);var _=function(){l(!0)},O=function(){l(!1),!g&&t(m)},I=function(e){a.every((function(t){return void 0===t(e.currentTarget.value)}))?(p(!1),d(e.currentTarget.value),M(e.currentTarget.value.length,n)):p(!0)},M=function(e,t){C("".concat(e,"/").concat(t))};return[_,O,I,o,m,g,v]},xa=function(e){var t=Ua(e.status,e.updateStatus,[st],30),a=Object(Q.a)(t,7),r=a[0],s=a[1],c=a[2],o=a[3],l=a[4];a[5],a[6];return n.a.createElement("div",{className:""},e.ENSM?n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("span",null,"Status: ",e.status||"-------"))):n.a.createElement("div",null,!o&&n.a.createElement("div",null,n.a.createElement("span",{onDoubleClick:r},"Status: ",e.status||"-------")),o&&n.a.createElement("div",null,n.a.createElement("input",{onChange:c,autoFocus:!0,onBlur:s,value:l}))))},ka=function(e){var t=e.profile,a=e.updateStatus,r=(e.updatePhoto,e.ENSM);return t?(console.log(t.photos.large),n.a.createElement("div",{className:Pa.a.profile_info},n.a.createElement("div",{className:Pa.a.landi_block},n.a.createElement("img",{src:"https://img2.goodfon.ru/wallpaper/big/3/9a/planety-kosmos-oskolki.jpg"})),n.a.createElement("div",{className:Pa.a.descriptionBlock},n.a.createElement("div",{className:Pa.a.ava_block},n.a.createElement("img",{src:t.photos.large,alt:"ProfilePhoto"})),n.a.createElement("div",{className:Pa.a.username},"USERNAME: ",t.name),n.a.createElement("div",{className:Pa.a.userinfo},n.a.createElement("div",null,"BIO: Date of Birth: 19 Jan 1997"),n.a.createElement(xa,{status:t.status,updateStatus:a,ENSM:r}),"img url: ",n.a.createElement("a",{target:"_blank",href:t.photos.large},"Get Photo"))))):n.a.createElement(Be,null)},Ta=a(60),Aa=a.n(Ta),Ra=a(140),Da=a.n(Ra),La=function(e){return n.a.createElement("div",{className:Da.a.item},n.a.createElement("img",{src:"https://movies4maniacs.liberty.me/wp-content/uploads/sites/1218/2015/09/avatarsucks.jpg"}),e.message,n.a.createElement("div",null,n.a.createElement("span",null,"like")," ",e.likesCount))},Wa=Object(ut.a)({form:"ProfileAddNewPostForm"})((function(e){return n.a.createElement("form",{onSubmit:e.handleSubmit}," ",n.a.createElement("div",{className:""},tt("Write your post","newPostText",Qe,[rt,st])),n.a.createElement("div",{className:""},n.a.createElement("button",null,"Add post")))})),Ba=Object(m.b)((function(e){return{posts:e.profilePage.posts}}),{addPost:function(e){return{type:"ADD-POST",newPostText:e}}})((function(e){var t=e.posts.map((function(e){return n.a.createElement(La,{message:e.message,likesCount:e.likesCount})}));return n.a.createElement("div",{className:Aa.a.postsBlock},n.a.createElement("div",{className:Aa.a.myPostsHeader},"My posts"),n.a.createElement("div",{className:Aa.a.createPost},n.a.createElement(Wa,{onSubmit:function(t){e.addPost(t.newPostText)}})),n.a.createElement("div",{className:Aa.a.posts},t))})),Ha=Object($.d)(te,Object(m.b)((function(e){return{profile:e.profilePage.profile,userId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:Sa,updateStatus:function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e);case 2:r=t.sent,console.log(r),0===r.data.resultCode&&a(Ia(e));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updatePhoto:function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var r,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e);case 2:0===(r=t.sent).data.resultCode?a({type:"SET_PHOTO",photos:e}):(n=r.data.messages.length?r.data.messages[0]:"Some error",a(Object(k.b)("updatePhoto",{_error:n})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},deleteUserProfile:function(){return function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==N().data.resultCode){e.next=6;break}t(Oa(null)),L.logout(),e.next=10;break;case 6:return e.next=8,S();case 8:0!==e.sent.data.resultCode&&(t(Oa(null)),L.logout());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},updateUserProfile:Fa}),Z.f)((function(e){var t=function(){var e=Object(r.useState)(!1),t=Object(Q.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(!1),c=Object(Q.a)(s,2),o=c[0],l=c[1];return[a,n,o,l,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(null!==t?!t:a)?function(){}:e}]}(),a=Object(Q.a)(t,5),s=a[0],c=a[1],o=a[2],l=a[3],u=a[4];return Object(r.useEffect)((function(){(function(){var t=Object(h.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e.match.params.userId)?e.userId!==parseInt(a)?!s&&c(!0):s&&c(!1):((a=e.userId)||e.history.push("/login"),s&&c(!1)),t.next=4,e.getUserProfile(a);case 4:l(!0);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.match.params.userId]),o?n.a.createElement("div",{className:Na.a.profile_wrapper},n.a.createElement(ka,{profile:e.profile,updateStatus:u(e.updateStatus),updatePhoto:u(e.updatePhoto),ENSM:s}),!s&&n.a.createElement("div",{className:""},n.a.createElement(Ba,null)," ",n.a.createElement(H.b,{to:"/profile_update"},"Update My Profile"),n.a.createElement("button",{onClick:e.deleteUserProfile},"Delete My Profile")," ")):n.a.createElement(Be,null)})),qa=Object(ut.a)({form:"login"})((function(e){var t=e.handleSubmit,a=e.pristine,r=e.reset,s=e.submitting,c=e.error;return n.a.createElement("form",{onSubmit:t},tt("Login","login",$e,[rt]),tt("Password","password",$e,[rt],{type:"password"}),c&&n.a.createElement("div",{className:Xe.a.formSummaryError},c),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"submit",disabled:a||s},"Login")),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"button",disabled:a||s,onClick:r},"Clear Values")))})),Ga=Object(m.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(r){var n,s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O("token");case 2:return a.next=4,F(e,t);case 4:if(0!==(n=a.sent).data.resultCode){a.next=11;break}return a.next=8,_("token",n.data.data.token);case 8:D(r,n.data.data),a.next=13;break;case 11:s=n.data.messages.length?n.data.messages[0]:"Some error",r(Object(k.b)("login",{_error:s}));case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){return e.isAuth?n.a.createElement(Z.a,{to:"/profile"}):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:""},n.a.createElement("h1",null,"LOGIN"),n.a.createElement(qa,{onSubmit:function(t){e.login(t.login,t.password)}})))})),Va=Object(ut.a)({form:"updateProfile"})((function(e){var t=Object(r.useState)(e.profile.lookingForAJob),a=Object(Q.a)(t,2),s=a[0],c=a[1],o=e.handleSubmit,l=e.pristine,u=e.reset,i=e.submitting,m=e.error,d=e.profile;return n.a.createElement("form",{onSubmit:o,className:Xe.a.redux_form},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"Name"),tt(d.name,"name",$e,[st],{defaultValue:d.name})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"Status"),tt(d.status,"status",Qe,[ot],{defaultValue:d.status})),n.a.createElement("h3",null,"Photos"),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"Large"),tt(d.photos.large,"photos_large",$e,null,{defaultValue:d.photos.large,autoComplete:"off"})," "),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"Small"),tt(d.photos.small,"photos_small",$e,null,{defaultValue:d.photos.small,autoComplete:"off"})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"Are you looking for A job?"),tt(d.lookingForAJob,"lookingForAJob",$e,null,{type:"checkbox",checked:s,onClick:function(){return c(!s)}})," "),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"Make a small description for a job you are looking for"),tt(d.lookingForAJobDescription,"lookingForAJobDescription",Qe,[ot],{defaultValue:d.lookingForAJobDescription})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"Fullname"),tt(d.fullname,"fullname",Qe,[ot],{defaultValue:d.fullname})),n.a.createElement("h3",null,"Contacts"),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"GitHub"),tt(d.contacts.github,"contacts_github",$e,[ct],{defaultValue:d.contacts.github})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"Vk"),tt("vk","contacts_vk",$e,[ct],{defaultValue:d.contacts.vk})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"Facebook"),tt("facebook","contacts_facebook",$e,[ct],{defaultValue:d.contacts.facebook})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"Instagram"),tt("instagram","contacts_instagram",$e,[ct],{defaultValue:d.contacts.instagram})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"Twitter"),tt("twitter","contacts_twitter",$e,[ct],{defaultValue:d.contacts.twitter})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"Website"),tt("website","contacts_website",$e,[ct],{defaultValue:d.contacts.website})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"Youtube"),tt("youtube","contacts_youtube",$e,[ct],{defaultValue:d.contacts.youtube})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:""},"Mail"),tt("mainLink","contacts_mainLink",$e,[ct],{defaultValue:d.contacts.mainLink})),m&&n.a.createElement("div",{className:Xe.a.formSummaryError},m),n.a.createElement("div",null,n.a.createElement("button",{type:"button",disabled:l||i,onClick:u},"Clear Values"),n.a.createElement("button",{type:"submit",disabled:l||i},"Update")))})),za=Object($.d)(te,Object(m.b)((function(e){return{profile:e.profilePage.profile,userId:e.auth.userId,isAuth:e.auth.isAuth}}),{updateUserProfile:Fa,getUserProfile:Sa}))((function(e){Object(r.useEffect)((function(){e.getUserProfile(e.userId)}),[]);var t=Object(r.useState)(!1),a=Object(Q.a)(t,2),s=a[0],c=a[1],o=function(e,t,a){var r=["contacts","photos"];r.every((function(e){return!t.startsWith(e)}))?e[t]=a:r.map((function(r){return t.startsWith(r)&&(e[r]={},e[r][t.split("_")[1]]=a),!0}))};return s?n.a.createElement(Z.a,{to:"/profile"}):e.profile?n.a.createElement("div",{className:Na.a.profile_update},n.a.createElement("h2",{className:Na.a.profile_update_header},"Profile Data Changing"),n.a.createElement(Va,{onSubmit:function(t){var a={};for(var r in t)o(a,r,t[r]);Object.keys(a).map((function(t){["contacts","photos"].includes(t)&&(a=Object(p.a)(Object(p.a)({},a),{},Object(Nt.a)({},t,it(Object.keys(e.profile[t]).reduce((function(r,n){return r[n]=n in a[t]?a[t][n]:e.profile[t][n],r}),{})))))})),e.updateUserProfile(a),c(!0)},profile:e.profile})):n.a.createElement(Be,null)})),Ka=function(e){var t=e.isInvalid,a=e.onMBChange,r=e.deactivateEditMode,s=e.editedMessage,c=e.charCount;return n.a.createElement("div",{className:ze.a.editMessage},n.a.createElement("textarea",{className:t?"".concat(ze.a.editField," ").concat(ze.a.error):"".concat(ze.a.editField),onChange:a,autoFocus:!0,onBlur:r,value:s}),t&&n.a.createElement("div",{className:ze.a.errorField},"Invalid Data"),n.a.createElement("div",{className:ze.a.countChars},c))},Ja=function(e){var t=e.fileId,a=e.activateEditMode,r=e.messageBody,s=e.fileImageURL,c=e.loadFile,o=e.ENSM;return t?n.a.createElement("div",{className:ze.a.messageBody,onDoubleClick:o?void 0:a}," ",r,n.a.createElement("div",{className:"".concat(ze.a.messageFile," ").concat(null===s?ze.a.fileImageDeactivate:ze.a.fileImageActivate)},c&&n.a.createElement(n.a.Fragment,null,n.a.createElement("span",null," + fileId: ",t),n.a.createElement("button",{onClick:function(){return c(t)}},"GetFile")),n.a.createElement("img",{src:s}))):n.a.createElement("div",{className:ze.a.messageBody,onDoubleClick:o?void 0:a},r)},Xa=function(e){var t=e.messageBody,a=e.editMessage,s=e.ENSM,c=e.fileId,o=e.fileIDBKey,l=e.loadImageFromIDB,u=e.getFile,i=Ua(t,a,[lt],1e3),m=Object(Q.a)(i,7),d=m[0],g=m[1],p=m[2],b=m[3],E=m[4],v=m[5],C=m[6],_=Object(r.useState)(!1),O=Object(Q.a)(_,2),I=O[0],M=O[1],S=Object(r.useState)(null),F=Object(Q.a)(S,2),y=F[0],j=F[1];return Object(r.useEffect)((function(){if(!I&&(console.log(o),o&&!y)){var e=function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("loadFromIdb"),e.next=3,l(t);case 3:a=e.sent,console.log("fileIDBValue for file IDB key: "+t),console.log(a),j(a),M(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();console.log(o),M(!0),e(o)}}),[o,l,y,I]),o&&null===y?n.a.createElement(Be,null):n.a.createElement(n.a.Fragment,null,!b&&n.a.createElement(Ja,{fileId:c,activateEditMode:d,messageBody:t,fileImageURL:y,loadFile:y?void 0:u,ENSM:s}),b&&n.a.createElement(Ka,{isInvalid:v,onMBChange:p,deactivateEditMode:g,editedMessage:E,charCount:C}))},Ya=Object(r.forwardRef)((function(e,t){var a=Object(r.useRef)();Object(r.useImperativeHandle)(t,(function(e){return a.current}));var s=e.message,c=e.editMessageRequest,o=e.deleteMessageRequest,l=e.ENSM,u=e.chatTypeId,i=e.chatId,m=e.getFile,d=e.downloadFile;return n.a.createElement("div",{className:"".concat(ze.a.message),ref:a},n.a.createElement("div",{className:ze.a.messageAuthorName},n.a.createElement(H.b,{to:"/profile/".concat(s.authorId)},s.authorName)),n.a.createElement(Xa,{ENSM:l,editMessage:function(e,t,a){return function(r){return c(e,t,a.id,r)}}(u,i,s),messageBody:s.body,getFile:m,downloadFile:d,fileId:s.fileId,loadImageFromIDB:e.loadImageFromIDB,fileIDBKey:s.fileIDBKey}),n.a.createElement("div",{className:ze.a.messageSendedEdited},n.a.createElement("div",{className:ze.a.messageSended},"sended: ",Ke(s.sended)),n.a.createElement("div",{className:ze.a.messageEdited},"edited: ",Ke(s.edited))),n.a.createElement("div",{className:ze.a.deleteMessage},!l&&n.a.createElement("a",{onClick:function(){o(u,i,s.id,s.fileId)}},"Delete Message")))})),Za=Object(ut.a)({form:"CreateMessage"})((function(e){var t=e.handleSubmit,a=e.pristine,s=e.reset,c=e.submitting,o=e.error,l=Object(r.useRef)(null);return n.a.createElement("form",{onSubmit:t,className:Xe.a.redux_form},tt("Write a message...","messageBody",Qe,[lt],{onCTRLEnt:function(e){13===e.keyCode&&e.ctrlKey?e.target.value+="\r\n":13===e.keyCode&&l.current.click()}.bind(void 0)}),tt("Upload a file...","uploadedFile",et,null,{type:"file"}),o&&n.a.createElement("div",{className:Xe.a.formSummaryError},o),n.a.createElement("div",{className:Xe.a.formButtons},n.a.createElement("button",{type:"button",disabled:a||c,onClick:s},"Clear"),n.a.createElement("button",{type:"submit",disabled:a||c,ref:l},"Send")))})),Qa=Object($.d)(te,Object(m.b)(null,{createMessageRequest:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(){var n=Object(h.a)(f.a.mark((function n(s){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s(be(!0)),s(Object(k.a)("CreateMessage")),console.log("in createMessageRequest"),console.log(r),null===r){n.next=13;break}return n.next=7,x.uploadFile(r.fileURL,r.fileName);case 7:c=n.sent,console.log("fileUploadResponse.data"),console.log(c.data.data),c.data.data.fileId?Ie(e,t,a,c.data.data.fileId,s):(console.log("fileUploadResponse error"),console.log(Object.keys(c.data.data))),n.next=14;break;case 13:Ie(e,t,a,null,s);case 14:s(be(!1));case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}))((function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:ze.a.createMessageFormH},"Message"),n.a.createElement(Za,{onSubmit:function(t){!t.messageBody&&t.uploadedFile&&(t.messageBody=" "),t.uploadedFile?e.createMessageRequest(e.chatTypeId,e.chatId,t.messageBody,t.uploadedFile):e.createMessageRequest(e.chatTypeId,e.chatId,t.messageBody)}}))})),$a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return a?[n.a.createElement("div",{className:"".concat(ze.a.newMsgsStartTag),ref:r},"----------UNREAD MESSAGES----------"),n.a.createElement(Ya,{message:e.msg,key:e.msg.id,ref:t,deleteMessageRequest:e.deleteMessageRequest,editMessageRequest:e.editMessageRequest,ENSM:!e.msg.local,chatTypeId:e._chatTypeId,chatId:e._chatId,getFile:e.getFile,loadImageFromIDB:e.loadImageFromIDB})]:n.a.createElement(Ya,{message:e.msg,key:e.msg.id,ref:t,deleteMessageRequest:e.deleteMessageRequest,editMessageRequest:e.editMessageRequest,ENSM:!e.msg.local,chatTypeId:e._chatTypeId,chatId:e._chatId,getFile:e.getFile,loadImageFromIDB:e.loadImageFromIDB})},er=Object($.d)(te,Object(m.b)((function(e){return{messages:na(e),isAuth:e.auth.isAuth,chatTypeId:sa(e),chatId:ca(e),currentChat:oa(e),fWAUFC:da(e),fWMFC:fa(e),fWMOFC:ha(e),readFromIndexNext:e.chatsPage.readFromIndexNext,readFromIndex:e.chatsPage.readFromIndex,readFromIndexBefore:e.chatsPage.readFromIndexBefore,IsFetchingMsgs:e.chatsPage.IsFetchingMsgs,windowScrollOnMsgCreate:e.chatsPage.windowScrollOnMsgCreate,isMessageCreating:e.chatsPage.isMessageCreating,isRefreshedAfterMC:e.chatsPage.isRefreshedAfterMC,numOfDeletedMsgs:e.chatsPage.numOfDeletedMsgs}}),{getMessages:Oe,editMessageRequest:function(e,t,a,r){return function(){var n=Object(h.a)(f.a.mark((function n(s){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.editMessage(e,t,a,r);case 2:0===(c=n.sent).data.resultCode?console.log("succs edited"):console.log("editMessageRequest error "+c.data.messages[0]);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteMessageRequest:function(e,t,a,r){return function(){var n=Object(h.a)(f.a.mark((function n(s){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s(ge(!0)),!r){n.next=4;break}return n.next=4,O("image-".concat(r));case 4:return n.next=6,x.deleteMessage(e,t,a);case 6:null===(c=n.sent).data.data?(console.log("succs deleted"),s({type:"INC_NUM_OF_DELETED_MSGS"})):console.log("deleteMessageRequest deleted "+c.data.messages[0]),s(ge(!1));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},getCurrentChatData:function(){return function(){var e=Object(h.a)(f.a.mark((function e(t){var a,r,n,s,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ge(!0)),a=parseInt(localStorage.getItem("chatId")),r=parseInt(localStorage.getItem("chatTypeId")),e.next=5,x.getChat(r,a);case 5:if(0!==(n=e.sent).data.resultCode){e.next=29;break}if(s="local","local"in n.data.data.lastMessage){e.next=12;break}console.log("not local lastMessage in getCurrentChatData"),e.next=16;break;case 12:if(n.data.data.lastMessage.local){e.next=16;break}return e.next=15,t(we(r,a,n.data.data.lastMessage.id));case 15:s=e.sent;case 16:if("local"!==s&&0!==s.data.resultCode){e.next=26;break}return c=0===r?"dialog":"conversation",n.data.data.chatTypeId=r,n.data.data.chatType=c,n.data.data.chatId=a,t(le(r,a,n.data.data)),e.next=24,t(Oe(r,a,n.data.data.readFromIndex,n.data.data.readFromIndexBefore));case 24:e.next=27;break;case 26:console.log("getCurrentChatData Error in updateUnreadMsgs"+s.data.messages[0]);case 27:e.next=30;break;case 29:console.log("getCurrentChatData Error in getChat"+n.data.messages[0]);case 30:t(ge(!1));case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},clearChatMyLocal:Fe,clearChatMyGlobal:ye,clearChatAllLocal:je,clearChatAllGlobal:Ne,toogleMemberStatus:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"toogleMemberStatus";return function(){var n=Object(h.a)(f.a.mark((function n(s){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Te(e,t,a,r,x.toogleMemberStatusForConversation.bind(x),"member status toggled: ","toggled","toogleMemberStatusForConversation error: ",s,se,"members");case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},removeMemberMsgs:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"removeMemberMsgs";return function(){var n=Object(h.a)(f.a.mark((function n(s){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Te(e,t,a,r,x.removeMemberMsgsForConversation.bind(x),"member msgs removed: ","memberMsgsRemoved","removeMemberMsgs error: ");case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},removeOneMemberMsg:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"removeOneMemberMsg";return function(){var n=Object(h.a)(f.a.mark((function n(s){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Te(e,t,a,r,x.removeOneMemberMsgForConversation.bind(x),"member msg removed: ","memberMsgRemoved","removeOneMemberMsg error: ");case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},removeMember:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"removeMember";return function(){var n=Object(h.a)(f.a.mark((function n(s){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Te(e,t,a,r,x.removeMemberFromConversation.bind(x),"member removed: ","memberRemoved","removeMember error: ",s,se,"members");case 2:n.sent;case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setChatPhotoRequest:ke,addMember:xe,renameChatRequest:Ue,addFocusedWindow:pa,clearCurrentFocusedWindow:ba,getFile:function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var r,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.getFile(e);case 2:r=t.sent,n=r.data,console.log(n),n.name?me(n.file,n.name,n.format).then((function(t){if(n.isImage){console.log("file.isImage");var r=new FileReader;r.onload=function(t){console.log("Uploaded"),a(ie(t.target.result,e))},r.readAsDataURL(t)}else{var s=URL.createObjectURL(t);Object(re.saveAs)(t),URL.revokeObjectURL(s)}})):console.log("error in getting file from api");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setRefreshMessageCreating:Ee,loadImageFromIDB:function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Z.f)((function(e){var t=e.getCurrentChatData,a=e.getMessages,s=e.IsFetchingMsgs,c=e.setRefreshMessageCreating,o=e.chatTypeId,l=e.chatId,u=e.readFromIndexNext,i=e.readFromIndex,m=e.windowScrollOnMsgCreate,d=e.isMessageCreating,g=e.isRefreshedAfterMC,b=e.numOfDeletedMsgs,E=e.loadImageFromIDB,v=Object(He.a)(e,["getCurrentChatData","getMessages","IsFetchingMsgs","setRefreshMessageCreating","chatTypeId","chatId","readFromIndexNext","readFromIndex","windowScrollOnMsgCreate","isMessageCreating","isRefreshedAfterMC","numOfDeletedMsgs","loadImageFromIDB"]),C=Object(r.useState)(!1,"oldMsgsDonwload"),_=Object(Q.a)(C,2),O=_[0],I=_[1],M=Object(r.useState)(!1,"preFetch"),S=Object(Q.a)(M,2),F=S[0],y=S[1],j=Object(r.useState)(null,"selectedMember"),N=Object(Q.a)(j,2),w=N[0],P=N[1],U=Object(r.useState)(!0,"refToTopAtStart"),x=Object(Q.a)(U,2),k=x[0],T=x[1],A=Object(r.useState)(!1,"positioningScrollRefScroll"),R=Object(Q.a)(A,2),D=R[0],L=R[1],W=Object(r.useRef)(null),B=Object(r.useRef)(null),H=Object(r.useRef)(null),q=Object(r.useState)(!1),G=Object(Q.a)(q,2),V=G[0],z=G[1],K=Object(r.useRef)(null);Object(r.useEffect)((function(){F&&J(k?"start":"notStart",k?B.current:W.current,k?null===v.currentChat.firstNewMsgID:D&&!O,H.current)})),Object(r.useEffect)((function(){g&&(K.current?K.current.scrollIntoView():console.log("some wierd error in ref creating for last msg after creation"),g&&c(!1))}),[c,g]),Object(r.useEffect)((function(){var e,t=null,a=new IntersectionObserver((function(e,t){e.forEach((function(e){var a=e.isIntersecting;console.log("only after scroll calling"),a&&(console.log("intersetcion of target(should be true) "),console.log("TOP DIV VIEWED: "+e.target.innerText),t.unobserve(e.target),I(!0))}))}),{threshold:(e=2,Array(e+1).fill(0).map((function(t,a){return a/e||0})))});return H.current&&F&&(!D&&!O||k)&&(t=H.current,a.observe(t)),function(){return null!==t&&a.unobserve(t)}}),[D,O,k,F]);var J=function(e,t,a,r){null!=t&&("start"===e?(a?t.scrollTop=t.scrollHeight:t.scrollIntoView(),T(!1)):a&&(t.scrollIntoView(),L(!1)))};if(Object(r.useEffect)((function(){(console.log("should run 2 times only (preFetch)"),F)||function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:y(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[F,t]),Object(r.useEffect)((function(){var e=null;return V||(e=setTimeout(Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O||!F||s||D){e.next=5;break}return z(!0),e.next=4,a(o,l,i,v.readFromIndexBefore,null,m&&!d,b);case 4:z(!1);case 5:case"end":return e.stop()}}),e)}))),1500)),function(){null!==e&&clearTimeout(e)}}),[F,O,s,D,o,l,i,v.readFromIndexBefore,a,m,d,b,V]),Object(r.useEffect)((function(){if(!D&&O&&!s){var e=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(o,l,u,i);case 2:I(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();L(!0),e()}}),[s,D,O,I,L,o,l,u,i,a]),F){b>0&&(console.log("numOfDeletedMsgs"),console.log(b));var X=u!==i?n.a.createElement("div",{className:"".concat(ze.a.loadOldMsgsDiv),ref:H}):n.a.createElement("div",{className:"".concat(ze.a.startChatDiv)},"----------Chat Start----------"),Y=v.messages.map((function(e,t){var a={msg:e,getFile:v.getFile,_chatId:l,_chatTypeId:o,editMessageRequest:v.editMessageRequest,deleteMessageRequest:v.deleteMessageRequest,loadImageFromIDB:E};return null!==v.currentChat.firstNewMsgID&&v.currentChat.firstNewMsgID<=e.id&&(0===t||v.messages[t-1].id<v.currentChat.firstNewMsgID)?$a(a,e.id===v.readFromIndexBefore&&D?W:void 0,!0,null!==v.currentChat.firstNewMsgID&&k?B:void 0):t===v.messages.length-1?$a(a,g?K:void 0):$a(a,e.id===v.readFromIndexBefore&&D?W:void 0)})).flat();Y.unshift(X);var Z=[{method:v.toogleMemberStatus,name:"Toogle Member"},{method:v.removeMemberMsgs,name:"Remove All Member Messages"},{method:v.removeMember,name:"Remove Member"}],$=v.currentChat.members.map((function(e){return e.id})),ee=1===o?v.currentChat.members.map((function(e){return n.a.createElement(Qt,{member:e,key:e.id,memberStyle:"".concat(ze.a.chatMember),chatMemberSettings:"".concat(ze.a.chatMemberSettings),setMemberOperShow:function(e){return e.stopPropagation(),v.addFocusedWindow(v.fWMOFC.id,!0)},addFocusedWindow:v.addFocusedWindow,fWMOFC:v.fWMOFC,setSelectedMember:P})})):v.currentChat.members.map((function(e){return n.a.createElement(Qt,{member:e,key:e.id})}));return n.a.createElement(n.a.Fragment,null,null!==v.fWAUFC.data&&n.a.createElement("div",{className:Ge.a.addMember},n.a.createElement(ea,{addMember:v.addMember,chatTypeId:o,chatId:l,chatUsersIds:$,fWAUFC:v.fWAUFC,clearCurrentFocusedWindow:v.clearCurrentFocusedWindow})),n.a.createElement("div",{className:ze.a.currentChat},n.a.createElement($t,{members:ee,membersShow:v.fWMFC.data,memberOperShow:v.fWMOFC.data,selectedMember:w,memberOpers:Z.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{method:(t=e.method,a=o,r=l,function(e){return function(){return t(a,r,e)}})});var t,a,r}))}),n.a.createElement("div",{className:ze.a.chatsHeader},n.a.createElement("div",{className:ze.a.chatsHeaderPhoto}," ",null!==v.currentChat.chatPhoto.small?n.a.createElement("img",{src:v.currentChat.chatPhoto.small}):n.a.createElement("div",{className:ze.a.chatsHeaderPhotoAlt},"chatPhotoSmall")),n.a.createElement("div",{className:ze.a.chatsHeaderName},v.currentChat.name),n.a.createElement("div",{className:ze.a.chatsHeaderSettings},"Settings",n.a.createElement("div",{className:ze.a.chatsSettings},1===o&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:ze.a.chatsSettingsItem},null===v.fWAUFC.data&&n.a.createElement("a",{className:Ge.a.getMemberList,onClick:function(e){return e.stopPropagation(),v.addFocusedWindow(v.fWAUFC.id,[o,l])}},"Add Member")),n.a.createElement("div",{className:ze.a.chatsSettingsItem},n.a.createElement("div",{className:ze.a.chatsSettingsItemH},"Change Photo"),n.a.createElement(Xt,{msgStyle:ze.a.chatsSettingsItemForm,setChatPhotoRequest:v.setChatPhotoRequest,chatTypeId:o,chatId:l})),n.a.createElement("div",{className:ze.a.chatsSettingsItem},n.a.createElement("div",{className:ze.a.chatsSettingsItemH},"Rename Chat"),n.a.createElement(Zt,{msgStyle:ze.a.chatsSettingsItemForm,renameChatRequest:v.renameChatRequest,chatTypeId:o,chatId:l}))),n.a.createElement("div",{className:ze.a.chatsSettingsItem},n.a.createElement(n.a.Fragment,null,null===v.fWMFC.data&&n.a.createElement("a",{onClick:function(e){return e.stopPropagation(),v.addFocusedWindow(v.fWMFC.id,!0)}},"Chat Members")))))),n.a.createElement("div",{className:ze.a.messages,ref:null===v.currentChat.firstNewMsgID&&k?B:void 0},Y),n.a.createElement("div",{className:ze.a.createMessageForm},n.a.createElement(Qa,{chatTypeId:o,chatId:l,isAuth:v.isAuth}))))}return n.a.createElement(Be,null)})),tr=n.a.memo((function(e){return console.log("rerender"),console.log(e.initialized),Object(r.useEffect)((function(){e.initializeApp()}),[]),e.initialized?n.a.createElement("div",{className:"whole-app-page-wrapper",onClick:function(){e.clearAllFocusedWindows()}},n.a.createElement("div",{className:"app-wrapper"},n.a.createElement(K,null),n.a.createElement(Y,null),n.a.createElement("div",{className:"app-wrapper-content"},n.a.createElement("div",{className:"content-background"}),n.a.createElement(Z.b,{path:"/profile/:userId?",render:function(){return n.a.createElement(Ha,null)}}),n.a.createElement(Z.b,{path:"/profile_update",render:function(){return n.a.createElement(za,null)}}),n.a.createElement(Z.b,{path:"/login",render:function(){return n.a.createElement(Ga,null)}}),n.a.createElement(Z.b,{path:"/users",render:function(){return n.a.createElement(Kt,null)}}),n.a.createElement(Z.b,{exact:!0,path:"/chats",render:function(){return n.a.createElement(Ca,null)}}),n.a.createElement(Z.b,{path:"/chats/:chatType/:name?",render:function(){return n.a.createElement(er,null)}})))):n.a.createElement(Be,null)})),ar=Object($.d)(Z.f,Object(m.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){Promise.all([e(function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:return"detail"in(a=e.sent).data?["Signature has expired.","Error decoding signature.","Invalid Authorization header. No credentials provided."].includes(a.data.detail)?console.log(a.data.detail):console.log("its amaizing error - server error"):0===a.data.resultCode&&D(t,a.data.data),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())]).then((function(t){e({type:"INITIALIZED_SUCCESS"})})).catch((function(t){["Signature has expired.","Error decoding signature.","Invalid Authorization header. No credentials provided."].includes(t.response.data.detail)||console.log("its amaizing error - server error"),e({type:"INITIALIZED_SUCCESS"})})).catch((function(t){console.log("you gonna die"),e({type:"INITIALIZED_SUCCESS"})}))}},clearAllFocusedWindows:function(){return{type:"CLEAR_FOCUSED_WINDOWS"}}}))(tr);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var rr=a(130),nr={},sr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nr;return e},cr=a(141),or=Object($.c)({profilePage:ya,chatsPage:Ae,sidebar:sr,usersPage:Ot,auth:L,form:rr.a,app:Ea}),lr=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$.d,ur=Object($.e)(or,lr(Object($.a)(cr.a)));window.__store__=ur;var ir=ur,mr=a(142);a.n(mr)()(n.a),c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(H.a,null,n.a.createElement(m.a,{store:ir},n.a.createElement(ar,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},42:function(e,t,a){e.exports={profile_info:"ProfileInfo_profile_info__26r6R",landi_block:"ProfileInfo_landi_block__3C4fp",descriptionBlock:"ProfileInfo_descriptionBlock__27yTJ",ava_block:"ProfileInfo_ava_block__2Rpvd",username:"ProfileInfo_username__1YfRh",userinfo:"ProfileInfo_userinfo__25_Nl"}},5:function(e,t,a){e.exports={currentChat:"Message_currentChat__1ON5H",chatsHeaderPhoto:"Message_chatsHeaderPhoto__3KmFL",message:"Message_message__XbAWd",chatsHeader:"Message_chatsHeader__3_7BC",chatsHeaderPhotoAlt:"Message_chatsHeaderPhotoAlt__345-N",chatsHeaderName:"Message_chatsHeaderName__1p2HE",chatsHeaderSettings:"Message_chatsHeaderSettings__4TgjU",chatsSettings:"Message_chatsSettings__2ENur",chatsSettingsItem:"Message_chatsSettingsItem__2SVEL",chatsSettingsItemForm:"Message_chatsSettingsItemForm__aVO9o",chatsSettingsItemH:"Message_chatsSettingsItemH__2o63j",messages:"Message_messages__3HWZ0",messageAuthorName:"Message_messageAuthorName__1cVdS",messageBody:"Message_messageBody__2Wdgx",messageSendedEdited:"Message_messageSendedEdited__3373j",messageSended:"Message_messageSended__H2dY7",messageEdited:"Message_messageEdited__92HVJ",messageFile:"Message_messageFile__2S4Qt",deleteMessage:"Message_deleteMessage__3FS2L",createMessageForm:"Message_createMessageForm__3DdyB",createMessageFormH:"Message_createMessageFormH__1b5Ip",editMessage:"Message_editMessage__1TmwA",editField:"Message_editField__2EuAr",errorField:"Message_errorField__3g5s-",countChars:"Message_countChars__3nCoj",chatsMembersActive:"Message_chatsMembersActive__1DOqr",chatMember:"Message_chatMember__zXlWp",chatMemberSettings:"Message_chatMemberSettings__1K7u5",chatsMembers:"Message_chatsMembers__1cNBf",fileImageActivate:"Message_fileImageActivate__3RbsQ",fileImageDeactivate:"Message_fileImageDeactivate__1M42n",usersForChatActive:"Message_usersForChatActive__1VVh3",userForChat:"Message_userForChat__8hQzz",loadOldMsgsDiv:"Message_loadOldMsgsDiv__3w6Hg",startChatDiv:"Message_startChatDiv__30ils",newMsgsStartTag:"Message_newMsgsStartTag__bWpwv",smthElseListActive:"Message_smthElseListActive__2LMiK",infoItemMSBs:"Message_infoItemMSBs__193yQ",subElemMSBs:"Message_subElemMSBs__d_qe5",membOperLink:"Message_membOperLink__2DVEZ"}},59:function(e,t,a){e.exports={profile_wrapper:"Profile_profile_wrapper__1hZ3w",profile_update:"Profile_profile_update__2LMYG",profile_update_header:"Profile_profile_update_header__3eGmb"}},6:function(e,t,a){e.exports={chats:"Chats_chats__1TXJD",chats_header:"Chats_chats_header__39r5-",chatsItems:"Chats_chatsItems__1zzrp",createChat:"Chats_createChat__dOG1Y",addMember:"Chats_addMember__2ZiZA",getMemberList:"Chats_getMemberList__22K5E",addMemberHeader:"Chats_addMemberHeader__i-mHV",createChatHeader:"Chats_createChatHeader__35c86",createChatForm:"Chats_createChatForm__2Fe3r",chatItem:"Chats_chatItem__XzdbY",chatItemData:"Chats_chatItemData__3E3Yr",chatItemPhoto:"Chats_chatItemPhoto__3_Xxx",chatLMBody:"Chats_chatLMBody__Sw_M_",chatLMSended:"Chats_chatLMSended__20eE7",chatLMAuthorName:"Chats_chatLMAuthorName__1ioDB",chatLMAuthorNameDotted:"Chats_chatLMAuthorNameDotted__-UvRr",chatItemNewMsgsNum:"Chats_chatItemNewMsgsNum__16sqK",chatItemName:"Chats_chatItemName__B8lls",member:"Chats_member__YJosT",memberName:"Chats_memberName__15vrK",memberPhoto:"Chats_memberPhoto__1exYC",chatSettings:"Chats_chatSettings__3IskM",chatSettingsMembersList:"Chats_chatSettingsMembersList__1LgvV",smthElseList:"Chats_smthElseList__3SIbd",subElem:"Chats_subElem__1qLPF",subElem2:"Chats_subElem2__3OATs",infoItem:"Chats_infoItem__wxWf6",deleteChat:"Chats_deleteChat__36l2A",renameChatItem:"Chats_renameChatItem__3q6ZS"}},60:function(e,t,a){e.exports={postsBlock:"MyPosts_postsBlock__1mvnH",myPostsHeader:"MyPosts_myPostsHeader__3o287",createPost:"MyPosts_createPost__1aopr",posts:"MyPosts_posts__286uv"}},74:function(e,t,a){e.exports={header:"Header_header__u1mKG",loginBlock:"Header_loginBlock__1KTXr"}},75:function(e,t,a){e.exports={paginator:"paginator_paginator__1CS79",pageNumber:"paginator_pageNumber__3o5RD",selectedPage:"paginator_selectedPage__NP13K"}},95:function(e,t,a){e.exports={userPhoto:"Users_userPhoto__3DatX",userChoosePhoto:"Users_userChoosePhoto__28RG5",bottom:"Users_bottom__3K9cG",selectedPage:"Users_selectedPage__31GKb"}}},[[169,1,2]]]);
//# sourceMappingURL=main.45437eb4.chunk.js.map