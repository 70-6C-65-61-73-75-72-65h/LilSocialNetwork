(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{133:function(e,t,a){e.exports=a.p+"static/media/preloader1.d5c02aa6.gif"},135:function(e,t,a){e.exports=a.p+"static/media/user.8b1dbb1f.png"},137:function(e,t,a){e.exports={profile_wrapper:"Profile_profile_wrapper__1lJ4_"}},138:function(e,t,a){e.exports={item:"Post_item__3_OiR",posts:"Post_posts__wEapD"}},167:function(e,t,a){e.exports=a(294)},172:function(e,t,a){},173:function(e,t,a){},19:function(e,t,a){e.exports={formControl:"FormsControls_formControl__1Wssk",error:"FormsControls_error__Lr8A7",warning:"FormsControls_warning__1ik2A",formSummaryError:"FormsControls_formSummaryError__1vavX"}},24:function(e,t,a){e.exports={nav:"Navbar_nav__2Na0t",item:"Navbar_item__1bENr",activeLink:"Navbar_activeLink__1wupa"}},293:function(e,t){},294:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(69),c=a.n(s),o=(a(172),a(173),a(41)),u=a(42),l=a(48),i=a(47),d=a(12),m=a(2),f=a.n(m),h=a(4),g=a(25),p=a(1),b=a(131),E=a(141),v=Object(E.a)("keyval-store",1,{upgrade:function(e){e.createObjectStore("keyval")}}),C=function(e){return Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v;case 2:return t.abrupt("return",t.sent.get("keyval",e));case 3:case"end":return t.stop()}}),t)})))()},_=function(e,t){return Object(h.a)(f.a.mark((function a(){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v;case 2:return a.abrupt("return",a.sent.put("keyval",t,e));case 3:case"end":return a.stop()}}),a)})))()},O=function(e){return Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v;case 2:return t.abrupt("return",t.sent.delete("keyval",e));case 3:case"end":return t.stop()}}),t)})))()},I=function(){return Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v;case 2:return e.abrupt("return",e.sent.getAllKeys("keyval"));case 3:case"end":return e.stop()}}),e)})))()},M=b.create({baseURL:"https://socnet97.herokuapp.com/",headers:{"Content-type":"application/json"}});M.interceptors.request.use(function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("token");case 2:return(a=e.sent)?t.headers.Authorization="Bearer "+a:delete t.headers.Authorization,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){Promise.reject(e)}));var S=function(){return M.get("api/auth/me/")},F=function(e,t){return console.log(e,"    ",t),M.post("api/auth/login/",{username:e,password:t})},y=function(e){return M.get("api/profile/".concat(e,"/"))},j=function(e){return M.put("api/profile/",e)},w=function(){return M.delete("api/profile/")},N=function(e){return M.put("api/profile/status/",{status:e})},P=function(e){return M.put("api/profile/photo/",{photos:e})},U={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return console.log("api/users?page=".concat(e,"&q=").concat(t)),null===t?M.get("api/users?page=".concat(e)):M.get("api/users?page=".concat(e,"&q=").concat(t))},follow:function(e){return M.post("api/follow/".concat(e,"/"))},unfollow:function(e){return M.delete("api/follow/".concat(e,"/"))},getfollow:function(e){return M.get("api/follow/".concat(e,"/"))}},x={chatPut:function(e,t,a,r,n){var s={putType:a};return s[r]=n,M.put("api/chats/".concat(e,"/").concat(t,"/"),s)},getChats:function(e,t){return null===t?M.get("api/chats/?page=".concat(e)):M.get("api/chats/?page=".concat(e,"&query=").concat(t))},createChat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!==t?M.post("api/chats/create/",{snusers:e,name:t}):M.post("api/chats/create/",{snusers:e})},getChat:function(e,t){return M.get("api/chats/".concat(e,"/").concat(t,"/"))},deleteChat:function(e,t){return M.delete("api/chats/".concat(e,"/").concat(t,"/"))},clearChat:function(e,t,a,r){return this.chatPut(e,t,a,"clearType",r)},renameChat:function(e,t,a,r){return this.chatPut(e,t,a,"newChatName",r)},updateUnreadMsgs:function(e,t,a,r){return this.chatPut(e,t,a,"lastGlobalReadMsgId",r)},toogleMemberStatusForConversation:function(e,t,a,r){return this.chatPut(e,t,a,"userId",r)},addMemberForConversation:function(e,t,a,r){return this.chatPut(e,t,a,"userId",r)},removeMemberFromConversation:function(e,t,a,r){return this.chatPut(e,t,a,"userId",r)},removeMemberMsgsForConversation:function(e,t,a,r){return this.chatPut(e,t,a,"userId",r)},removeOneMemberMsgForConversation:function(e,t,a,r){return this.chatPut(e,t,a,"userId",r)},setChatPhoto:function(e,t,a,r){return this.chatPut(e,t,a,"newChatPhoto",r)},getMessages:function(e,t,a,r,n,s){return null===s?null===n?M.get("api/chats/".concat(e,"/").concat(t,"/messages/?readFromIndex=").concat(a,"&readFromIndexBefore=").concat(r)):M.get("api/chats/".concat(e,"/").concat(t,"/messages/?readFromIndex=").concat(a,"&readFromIndexBefore=").concat(r,"&query=").concat(n)):null===n?M.get("api/chats/".concat(e,"/").concat(t,"/messages/?readFromIndex=").concat(a,"&readFromIndexBefore=").concat(r,"&numOfDeletedMsgs=").concat(s)):M.get("api/chats/".concat(e,"/").concat(t,"/messages/?readFromIndex=").concat(a,"&readFromIndexBefore=").concat(r,"&query=").concat(n,"&numOfDeletedMsgs=").concat(s))},createMessage:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return M.post("api/chats/".concat(e,"/").concat(t,"/messages/create/"),{messageBody:a,fileId:r})},getFile:function(e){return M.get("api/files/".concat(e))},uploadFile:function(e,t){return M.post("api/files/",{fileURL:e,fileName:t})},editMessage:function(e,t,a,r){return console.log("api/chats/".concat(e,"/").concat(t,"/messages/").concat(a,"/")),console.log({newMessageBody:r}),M.put("api/chats/".concat(e,"/").concat(t,"/messages/").concat(a,"/"),{newMessageBody:r})},deleteMessage:function(e,t,a){return M.delete("api/chats/".concat(e,"/").concat(t,"/messages/").concat(a,"/"))}},k=a(17),T={userId:null,email:null,login:null,isAuth:!1},A=function(e,t,a,r){return{type:"my-app/auth/SET_USER_DATA",payload:{userId:e,email:t,login:a,isAuth:r}}},R=function(e){return[e.userId,e.email,e.login]},D=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e(A.apply(void 0,Object(g.a)(R(t)).concat([a])))},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"my-app/auth/SET_USER_DATA":return Object(p.a)(Object(p.a)({},e),t.payload);default:return e}},W=a(73),B=a.n(W),H=a(15),q=function(e){return n.a.createElement("header",{className:B.a.header},n.a.createElement("img",{src:"https://www.freelogodesign.org/Content/img/logo-ex-7.png"}),e.isAuth?n.a.createElement("div",{className:B.a.loginBlock},e.login," - ",n.a.createElement("a",{onClick:e.logout},"Logout")):n.a.createElement("div",{className:B.a.loginBlock},n.a.createElement(H.b,{to:"/login"},"Login")))},G=function(e){Object(l.a)(a,e);var t=Object(i.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return n.a.createElement(q,this.props)}}]),a}(n.a.Component),V=Object(d.b)((function(e){return{login:e.auth.login,isAuth:e.auth.isAuth}}),{logout:function(){return function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("token");case 2:t(A(null,null,null,!1));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(G),z=a(24),J=a.n(z),K=function(){return n.a.createElement("nav",{className:J.a.nav},n.a.createElement("div",{className:J.a.item},n.a.createElement(H.b,{to:"/profile",activeClassName:J.a.activeLink},"Profile")),n.a.createElement("div",{className:"".concat(J.a.item," ").concat(J.a.active)},n.a.createElement(H.b,{to:"/users",activeClassName:J.a.activeLink},"Users")),n.a.createElement("div",{className:"".concat(J.a.item," ").concat(J.a.active)},n.a.createElement(H.b,{to:"/chats",activeClassName:J.a.activeLink},"Chats")),n.a.createElement("div",{className:"".concat(J.a.item," ").concat(J.a.active)},n.a.createElement(H.b,{to:"/login",activeClassName:J.a.activeLink},"Login")))},X=a(16),Z=a(11),Q=a(10),Y=function(e){return{isAuth:e.auth.isAuth,userId:e.auth.userId}},$=function(e){var t=function(t){Object(l.a)(r,t);var a=Object(i.a)(r);function r(){return Object(o.a)(this,r),a.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return this.props.isAuth?n.a.createElement(e,this.props):n.a.createElement(X.a,{to:"/login"})}}]),r}(n.a.Component);return Object(d.b)(Y)(t)},ee=function(e){return e=JSON.parse(e.replace(/'/g,'"'))},te=a(132),ae={chatId:null,chatTypeId:null,chatsAliases:[],messages:[],chats:[],currentChat:null,isFetching:!1,isUnmount:!1,membersToSelect:[],readFromIndex:null,readFromIndexNext:null,readFromIndexBefore:null,IsFetchingMsgs:!1,loadingFilesIds:[],windowScrollOnMsgCreate:!1,isMessageCreating:!1,isRefreshedAfterMC:!1,numOfDeletedMsgs:0},re=function(e){return{type:"SET_CURRENT_CHAT_MEMBERS",members:e}},ne=function(e){return{type:"SET_CURRENT_CHAT_NAME",name:e}},se=function(e){return{type:"SET_CURRENT_CHAT_PHOTO",chatPhoto:e}},ce=function(e,t,a){return{type:"SET_CURRENT_CHAT_DATA",chatId:t,chatTypeId:e,currentChat:a}},oe=function(e){return{type:"CURRENT_CHAT_DATA_FETCHING",isFetching:e}},ue=function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(r){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_("image-".concat(t),e);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()};function le(e,t,a){return console.log("url to file"+e),console.log(e),fetch(e).then((function(e){return e.arrayBuffer()})).then((function(e){return new File([e],t,{type:a})}))}var ie=function(e){return{type:"SET_CHATS",chats:e}},de=function(e){return{type:"SET_MESSAGES",messages:e}},me=function(e,t,a){return{type:"SET_READ_FROM_INDEXES",readFromIndex:e,readFromIndexNext:t,readFromIndexBefore:a}},fe=function(e){return{type:"SET_FETCHING_MSGS",IsFetchingMsgs:e}},he=function(e){return{type:"SHOULD_WINDOW_SCROLL_DOWN",windowScrollOnMsgCreate:e}},ge=function(e){return{type:"SET_MESSAGE_CREATING",isMessageCreating:e}},pe=function(e){return{type:"SET_REFRESH_AFTER_MESSAGE_CREATING",isRefreshedAfterMC:e}},be=function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(r){var n,s,c;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=parseInt(localStorage.getItem("chatId")),s=parseInt(localStorage.getItem("chatTypeId")),a.next=4,x.getChat(s,n);case 4:0===(c=a.sent).data.resultCode?r(e(c.data.data[t])):console.log("refreshCurrentChatData Error in getChat"+c.data.messages[0]);case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Ee=function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getChat(t.chatTypeId,t.id);case 2:if(0!==(a=e.sent).data.resultCode){e.next=11;break}return a.data.data.chatTypeId=t.chatTypeId,a.data.data.chatId=t.id,a.data.data.chatTimeStamp=t.chatTimeStamp,0===t.chatTypeId?a.data.data.chatType="dialog":a.data.data.chatType="conversation",e.abrupt("return",a.data.data);case 11:return console.log("getChat Error "+a.data.messages[0]),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return a=e.sent,e.abrupt("return",a.sort((function(e,t){return t.chatTimeStamp-e.chatTimeStamp})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(e,t,a){return e.map((function(e){return e[t]=t,e[a]=a,e}))},Ce=function(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return function(){var o=Object(h.a)(f.a.mark((function o(u){var l,i,d;return f.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return u(fe(!0)),c>0&&u({type:"NULL_NUM_OF_DELETED_MSGS"}),o.next=4,x.getMessages(e,t,a,r,n,c);case 4:if(0!==(l=o.sent).data.resultCode){o.next=15;break}return o.next=8,I();case 8:i=o.sent,d=ve(l.data.data.items,e,t).map((function(e){if(null!==e.fileId){var t="image-".concat(e.fileId);i.includes(t)&&(e.fileIDBKey=t)}return e})),u(de(d)),d.length>0?u(me(d[0].id,l.data.data.readFromIndexNext,l.data.data.readFromIndexBefore)):u(me(a,l.data.data.readFromIndexNext,l.data.data.readFromIndexBefore)),s&&(u(he(!1)),u(pe(!0))),o.next=16;break;case 15:console.log("getMessages error "+l.data.messages[0]);case 16:u(fe(!1));case 17:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()},_e=function(){var e=Object(h.a)(f.a.mark((function e(t,a,r,n,s){var c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.createMessage(t,a,r,n);case 2:0===(c=e.sent).data.resultCode?s(he(!0)):(o=c.data.messages.length?c.data.messages[0]:"Some error",s(Object(k.b)("CreateMessage",{_error:o})));case 4:case"end":return e.stop()}}),e)})));return function(t,a,r,n,s){return e.apply(this,arguments)}}(),Oe=["myLocal","myGlobal","allLocal","allGlobal"],Ie=function(e,t,a,r){return function(){var n=Object(h.a)(f.a.mark((function n(s){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.clearChat(e,t,a,r);case 2:if(0!==(c=n.sent).data.resultCode){n.next=7;break}return n.abrupt("return",c.data.data.cleared);case 7:console.log("clearLocalChat deleted "+c.data.messages[0]);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Me=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"clear",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oe[0];return Ie(e,t,a,r)},Se=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"clear",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oe[1];return Ie(e,t,a,r)},Fe=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"clear",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oe[2];return Ie(e,t,a,r)},ye=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"clear",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oe[3];return Ie(e,t,a,r)},je=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"updateUnreadMsgs";return function(){var n=Object(h.a)(f.a.mark((function n(s){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.updateUnreadMsgs(e,t,r,a);case 2:return 0===(c=n.sent).data.resultCode?console.log("updateUnreadMsgs updated"):console.log("updateUnreadMsgs error"),n.abrupt("return",c);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},we=function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(r){var n,s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,x.createChat(e,t);case 3:0===(n=a.sent).data.resultCode?console.log("createChatRequest created: "+n.data.data.created):(console.log("createChatRequest error"),s=n.data.messages.length?n.data.messages[0]:"Some error",r(Object(k.b)("CreateChat",{_error:s})));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Ne=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rename";return function(){var n=Object(h.a)(f.a.mark((function n(s){var c,o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.renameChat(e,t,r,a);case 2:0===(c=n.sent).data.resultCode?(console.log("chat renamed:"+c.data.data.renamed),s(be(ne,"name"))):(o=c.data.messages.length?c.data.messages[0]:"Some error",s(Object(k.b)("renameChat",{_error:o})));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Pe=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"addMember";return function(){var n=Object(h.a)(f.a.mark((function n(s){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("adding member"),console.log(e,t,a),n.next=4,xe(e,t,a,r,x.addMemberForConversation.bind(x),"member added: ","memberAdded","addMember error: ",s,re,"members");case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ue=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"setChatPhoto";return function(){var n=Object(h.a)(f.a.mark((function n(s){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,xe(e,t,a,r,x.setChatPhoto.bind(x),"chat photo changed: ","isChatPhotoChanged","setChatPhotoRequest error: ",s,se,"chatPhoto");case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},xe=function(){var e=Object(h.a)(f.a.mark((function e(t,a,r,n,s,c,o,u){var l,i,d,m,h,g=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=g.length>8&&void 0!==g[8]?g[8]:null,i=g.length>9&&void 0!==g[9]?g[9]:null,d=g.length>10&&void 0!==g[10]?g[10]:null,e.next=5,s(t,a,n,r);case 5:return 0===(m=e.sent).data.resultCode?(console.log(c+m.data.data[o]),i&&l(be(i,d))):(h=m.data.messages.length?m.data.messages[0]:"Some error",console.log(u+h)),e.abrupt("return",m);case 8:case"end":return e.stop()}}),e)})));return function(t,a,r,n,s,c,o,u){return e.apply(this,arguments)}}(),ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INC_NUM_OF_DELETED_MSGS":var a=e.numOfDeletedMsgs+1;return Object(p.a)(Object(p.a)({},e),{},{numOfDeletedMsgs:a});case"NULL_NUM_OF_DELETED_MSGS":var r=0;return Object(p.a)(Object(p.a)({},e),{},{numOfDeletedMsgs:r});case"SET_CHATS":return Object(p.a)(Object(p.a)({},e),{},{chats:t.chats});case"SET_CHATS_ALIAS_MAP":return Object(p.a)(Object(p.a)({},e),{},{chatsAliases:t.chatsAliases});case"SET_MESSAGES":return Object(p.a)(Object(p.a)({},e),{},{messages:t.messages});case"SET_CURRENT_CHAT_DATA":return Object(p.a)(Object(p.a)({},e),{},{chatId:t.chatId,chatTypeId:t.chatTypeId,currentChat:t.currentChat});case"TOOGLE_IS_UNMOUNT":return Object(p.a)(Object(p.a)({},e),{},{isUnmount:t.isUnmount});case"CURRENT_CHAT_DATA_FETCHING":return Object(p.a)(Object(p.a)({},e),{},{isFetching:t.isFetching});case"SET_CURRENT_CHAT_MEMBERS":return Object(p.a)(Object(p.a)({},e),{},{currentChat:Object(p.a)(Object(p.a)({},e.currentChat),{},{members:t.members})});case"SET_CURRENT_CHAT_NAME":return Object(p.a)(Object(p.a)({},e),{},{currentChat:Object(p.a)(Object(p.a)({},e.currentChat),{},{name:t.name})});case"SET_CURRENT_CHAT_PHOTO":return Object(p.a)(Object(p.a)({},e),{},{currentChat:Object(p.a)(Object(p.a)({},e.currentChat),{},{chatPhoto:t.chatPhoto})});case"SET_READ_FROM_INDEXES":return Object(p.a)(Object(p.a)({},e),{},{readFromIndex:t.readFromIndex,readFromIndexNext:t.readFromIndexNext,readFromIndexBefore:t.readFromIndexBefore});case"SET_FETCHING_MSGS":return Object(p.a)(Object(p.a)({},e),{},{IsFetchingMsgs:t.IsFetchingMsgs});case"SHOULD_WINDOW_SCROLL_DOWN":return Object(p.a)(Object(p.a)({},e),{},{windowScrollOnMsgCreate:t.windowScrollOnMsgCreate});case"SET_MESSAGE_CREATING":return Object(p.a)(Object(p.a)({},e),{},{isMessageCreating:t.isMessageCreating});case"SET_REFRESH_AFTER_MESSAGE_CREATING":return Object(p.a)(Object(p.a)({},e),{},{isRefreshedAfterMC:t.isRefreshedAfterMC});case"SET_IDB_KEY_IN_MESSAGE":return Object(p.a)(Object(p.a)({},e),{},{messages:t.idbFileMessageKey});case"EDIT_MESSAGE":return Object(p.a)(Object(p.a)({},e),{},{messages:e.messages.map((function(e){return e.id===t.messageId?Object(p.a)(Object(p.a)({},e),{},{body:t.newMessageBody}):e}))});default:return e}},Te=a(133),Ae=a.n(Te),Re=function(e){return n.a.createElement("div",{style:{backgroundColor:"white"}},n.a.createElement("img",{src:Ae.a,style:{width:"8wh",height:"8vh"}}))},De=a(26),Le=a(5),We=a.n(Le),Be=a(6),He=a.n(Be),qe=function(e){if(!e)return"";var t=new Date(1e3*e),a=t.getHours()<10?"0".concat(t.getHours()):t.getHours(),r=t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes();return"".concat(a,":").concat(r)},Ge=a(19),Ve=a.n(Ge),ze=a(127),Je=function(e){e.input;var t=e.meta,a=t.touched,r=t.error,s=t.warning,c=e.children,o=a&&r,u=a&&s;return n.a.createElement("div",{className:Ve.a.formControl+" "+(o?Ve.a.error:"")+" "+(u?Ve.a.warning:"")},n.a.createElement("div",{className:""},c),n.a.createElement("div",{className:""},o&&n.a.createElement("span",null,r)||u&&n.a.createElement("span",null,s)))},Ke=function(e){var t=e.input,a=(e.meta,e.child,Object(De.a)(e,["input","meta","child"]));return n.a.createElement(Je,e,n.a.createElement("textarea",Object.assign({},t,a)))},Xe=function(e){var t=e.input,a=(e.meta,e.child,Object(De.a)(e,["input","meta","child"]));return n.a.createElement(Je,e,n.a.createElement("input",Object.assign({},t,a)))},Ze=function(e){var t=e.input,a=(e.meta,e.child,Object(De.a)(e,["input","meta","child"]),function(e){return new Promise((function(t,a){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return a(e)}}))}),r=function(){var t=Object(h.a)(f.a.mark((function t(r){var n,s,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.input,!(s=r.target.files[0])){t.next=9;break}return t.next=5,a(s);case 5:c=t.sent,n.onChange({fileURL:c,fileName:s.name}),t.next=10;break;case 9:n.onChange(null);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=t.value?t.value.name:+new Date;return n.a.createElement("input",{key:s,type:"file",onChange:r})},Qe=function(e,t,a,r){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return n.a.createElement("div",{className:""},n.a.createElement(ze.a,Object.assign({placeholder:e,name:t,component:a,validate:r},s)),c)},Ye=(n.a.Component,function(e){var t=e.pristine,a=e.reset,r=e.submitting,s=e.error,c=e.sumbitButtonName;return n.a.createElement(n.a.Fragment,null,s&&n.a.createElement("div",{className:Ve.a.formSummaryError},s),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"submit",disabled:t||r},c)),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"button",disabled:t||r,onClick:a},"Clear")))}),$e=function(e){if(!e)return"Field is required"},et=function(e){return function(t){return t&&t.length>e?"Value must be no longer then ".concat(e," symbols"):void 0}},tt=(et(10),et(30)),at=et(50),rt=et(200),nt=et(1e3),st=a(128),ct=function(e){return e=JSON.stringify(e).replace(/"/g,"'")},ot=function(e,t,a,r){return e.map((function(e){return e[a]===t?Object(p.a)(Object(p.a)({},e),r):e}))},ut={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[],query:""},lt=function(e,t){return{type:"FOLLOW_UNFOLLOW",userId:e,userRelation:t}},it=function(e){return{type:"SET_USERS",users:e}},dt=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},mt=function(e){return{type:"SET_TOTAL_USERS_COUNT",count:e}},ft=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},ht=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},gt=function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(r){var n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(ft(!0)),r(dt(e)),a.next=4,U.getUsers(e,t);case 4:n=a.sent,r(ft(!1)),r(it(n.data.users.items)),r(mt(n.data.users.totalCount));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},pt=function(){var e=Object(h.a)(f.a.mark((function e(t,a,r,n){var s,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ht(!0,a)),e.next=3,r(a);case 3:if(0!==(s=e.sent).data.resultCode&&""!==s.data){e.next=9;break}return e.next=7,U.getfollow(a);case 7:0===(c=e.sent).data.resultCode&&t(n(a,c.data.data.userRelation));case 9:t(ht(!1,a));case 10:case"end":return e.stop()}}),e)})));return function(t,a,r,n){return e.apply(this,arguments)}}(),bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUERY":return Object(p.a)(Object(p.a)({},e),{},{query:t.query});case"FOLLOW_UNFOLLOW":return Object(p.a)(Object(p.a)({},e),{},{users:ot(e.users,t.userId,"userId",{userRelation:t.userRelation})});case"SET_USERS":return Object(p.a)(Object(p.a)({},e),{},{users:t.users});case"SET_CURRENT_PAGE":return Object(p.a)(Object(p.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(p.a)(Object(p.a)({},e),{},{totalUsersCount:t.count});case"TOGGLE_IS_FETCHING":return Object(p.a)(Object(p.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":var a=Object(p.a)(Object(p.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(g.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});return a;default:return e}},Et=a(94),vt=a.n(Et),Ct=a(135),_t=a.n(Ct),Ot=function(e){var t=e.user,a=e.followingInProgress,r=e.unfollow,s=e.follow;return console.log(t),n.a.createElement("div",null,n.a.createElement("span",null,n.a.createElement("div",null,n.a.createElement(H.b,{to:"/profile/"+t.userId},n.a.createElement("img",{src:null!=t.photos.small?t.photos.small:_t.a,className:vt.a.userPhoto}))),n.a.createElement("div",null,"subscription"===t.userRelation||"friend"===t.userRelation?n.a.createElement("button",{disabled:a.some((function(e){return e===t.userId})),onClick:function(){r(t.userId)}},"Unfollow"):n.a.createElement("button",{disabled:a.some((function(e){return e===t.userId})),onClick:function(){s(t.userId)}},"Follow"))),n.a.createElement("span",null,n.a.createElement("span",null,n.a.createElement("div",null,t.name),n.a.createElement("div",null,t.status))))},It=function(e){var t=e.user,a=e.setSelectedForChatUsers,r=e.setSelectedForChatUser,s=e.selectedForChatUsers,c=e.chatUsersIds;e.styleForUser,Object(De.a)(e,["user","setSelectedForChatUsers","setSelectedForChatUser","selectedForChatUsers","chatUsersIds","styleForUser"]);return n.a.createElement("div",null,n.a.createElement(H.b,{to:"/profile/"+t.userId},n.a.createElement("div",null,t.name),n.a.createElement("div",{className:vt.a.userChoosePhoto},n.a.createElement("img",{src:t.photos.small,alt:"Ava"}))),s?s.includes(t.userId)?n.a.createElement("a",{onClick:function(){a(s.filter((function(e){return e!==t.userId})))}},"Remove User"):n.a.createElement("a",{onClick:function(){a([].concat(Object(g.a)(s),[t.userId]))}},"Add User"):c.includes(t.userId)?n.a.createElement("div",{style:{color:"blue"}},"Chat Member"):n.a.createElement("a",{onClick:function(){r(t.userId),console.log("after that should run inner function of useUserReducer "+t.userId)}},"Add Member"))},Mt=a(43),St=a(74),Ft=a.n(St),yt=a(136),jt=a.n(yt),wt=function(e){for(var t=e.totalItemsCount,a=e.pageSize,s=e.currentPage,c=e.onPageChanged,o=e.portionSize,u=void 0===o?10:o,l=Math.ceil(t/a),i=[],d=1;d<=l;d++)i.push(d);var m=Math.ceil(l/u),f=Object(r.useState)(1),h=Object(Z.a)(f,2),g=h[0],p=h[1],b=(g-1)*u+1,E=g*u;return n.a.createElement("div",{className:Ft.a.paginator},g>1&&n.a.createElement("button",{onClick:function(){return p(g-1)}},"PREV"),i.filter((function(e){return e>=b&&e<=E})).map((function(e){return n.a.createElement("span",{className:jt()(Object(Mt.a)({},Ft.a.selectedPage,s===e),Ft.a.pageNumber),key:e,onClick:function(t){c(e)}},e)})),m>g&&n.a.createElement("button",{onClick:function(){return p(g+1)}},"NEXT"))},Nt=function(e){var t=e.currentPage,a=e.totalUsersCount,r=e.pageSize,s=e.onPageChanged,c=e.users,o=e.forChat,u=void 0!==o&&o,l=e.setSelectedForChatUsers,i=e.setSelectedForChatUser,d=e.chatUsersIds,m=e.selectedForChatUsers,f=(e.styleForUsers,e.styleForUser),h=Object(De.a)(e,["currentPage","totalUsersCount","pageSize","onPageChanged","users","forChat","setSelectedForChatUsers","setSelectedForChatUser","chatUsersIds","selectedForChatUsers","styleForUsers","styleForUser"]);return n.a.createElement("div",null,n.a.createElement(wt,{currentPage:t,onPageChanged:s,totalItemsCount:a,pageSize:r}),n.a.createElement("div",null,c.map((function(e){return u?n.a.createElement(It,{user:e,setSelectedForChatUsers:l,setSelectedForChatUser:i,selectedForChatUsers:m,styleForUser:f,chatUsersIds:d,fWAUFC:h.fWAUFC,clearCurrentFocusedWindow:h.clearCurrentFocusedWindow,key:e.id}):n.a.createElement(Ot,{user:e,followingInProgress:h.followingInProgress,key:e.id,unfollow:h.unfollow,follow:h.follow})}))))},Pt=a(49),Ut=Object(Pt.a)((function(e){return e.usersPage.users}),(function(e){return e.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{photos:ee(e.photos)})}))})),xt=function(e){return e.usersPage.query},kt=function(e){return e.usersPage.pageSize},Tt=function(e){return e.usersPage.totalUsersCount},At=function(e){return e.usersPage.currentPage},Rt=function(e){return e.usersPage.isFetching},Dt=function(e){return e.usersPage.followingInProgress},Lt=Object(st.a)({form:"UsersSearch"})((function(e){var t=e.handleSubmit,a=e.pristine,r=e.reset,s=e.submitting,c=e.error,o=e.query;return n.a.createElement("form",{onSubmit:t},Qe(o,"search",Xe,[at],{defaultValue:o}),c&&n.a.createElement("div",{className:Ve.a.formSummaryError},c),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"submit",disabled:a||s},"Run")),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"button",disabled:a||s,onClick:r},"Clear Values")))})),Wt=Object(d.b)((function(e){return{currentPage:At(e),query:xt(e)}}),{searchUsers:gt,setQuery:function(e){return{type:"SET_QUERY",query:e}}})((function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:""},n.a.createElement("label",{htmlFor:""},"SEARCH: "),n.a.createElement(Lt,{onSubmit:function(t){e.setQuery(t.search),e.searchUsers(e.currentPage,t.search)},query:e.query})))})),Bt=Object(Q.d)(Object(d.b)((function(e){return{users:Ut(e),pageSize:kt(e),totalUsersCount:Tt(e),currentPage:At(e),isFetching:Rt(e),followingInProgress:Dt(e),query:xt(e)}}),{follow:function(e){return function(t){pt(t,e,U.follow.bind(U),lt)}},unfollow:function(e){return function(t){pt(t,e,U.unfollow.bind(U),lt)}},setCurrentPage:dt,toggleFollowingProgress:ht,getUsers:function(e,t){return function(){var t=Object(h.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(ft(!0)),a(dt(e)),t.next=4,U.getUsers(e);case 4:r=t.sent,a(ft(!1)),a(it(r.data.users.items)),a(mt(r.data.users.totalCount));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},searchUsers:gt}))((function(e){var t=function(e,t,a,n,s){Object(r.useEffect)((function(){""===a?e(n,s):t(n,a)}),[n]);return[function(r){""===a?e(r,s):t(r,a)}]}(e.getUsers,e.searchUsers,e.query,e.currentPage,e.pageSize),a=Object(Z.a)(t,1)[0];return n.a.createElement("div",{className:e.styleForUsers?e.styleForUsers:""},e.isFetching?n.a.createElement(Re,null):null,n.a.createElement("div",null,n.a.createElement(Wt,null)),0===e.fWUFCID?n.a.createElement("a",{onClick:function(){return e.clearCurrentFocusedWindow(e.fWUFCID)}},"End Selection"):null,n.a.createElement(Nt,{totalUsersCount:e.totalUsersCount,pageSize:e.pageSize,currentPage:e.currentPage,onPageChanged:a,users:e.users,follow:e.follow,unfollow:e.unfollow,followingInProgress:e.followingInProgress,forChat:e.forChat,setSelectedForChatUsers:e.setSelectedForChatUsers,setSelectedForChatUser:e.setSelectedForChatUser,chatUsersIds:e.chatUsersIds,fWAUFC:e.fWAUFC,clearCurrentFocusedWindow:e.clearCurrentFocusedWindow,selectedForChatUsers:e.selectedForChatUsers,styleForUsers:e.styleForUsers,styleForUser:e.styleForUser}))})),Ht=Object(st.a)({form:"chageChatPhoto"})((function(e){var t=e.handleSubmit,a=e.pristine,r=e.reset,s=e.submitting,c=e.error,o=e.msgStyle;return n.a.createElement("form",{onSubmit:t,className:"".concat(o," ").concat(We.a.addBorder)},Qe("Photo","photo",Xe,[nt]),n.a.createElement(Ye,{pristine:a,reset:r,submitting:s,error:c,sumbitButtonName:"Change Photo"}))})),qt=function(e){var t=e.setChatPhotoRequest,a=e.chatTypeId,r=e.chatId,s=e.msgStyle,c=void 0===s?"":s;return n.a.createElement(Ht,{onSubmit:function(e){var n=ct({large:null,small:e.photo});t(a,r,n)},msgStyle:c})},Gt=Object(st.a)({form:"renameChat"})((function(e){var t=e.handleSubmit,a=e.pristine,r=e.reset,s=e.submitting,c=e.error,o=e.msgStyle;return n.a.createElement("form",{onSubmit:t,className:"".concat(o," ").concat(We.a.addBorder)},Qe("Name","name",Xe,[rt]),n.a.createElement(Ye,{pristine:a,reset:r,submitting:s,error:c,sumbitButtonName:"Rename Chat"}))})),Vt=function(e){var t=e.renameChatRequest,a=e.chatTypeId,r=e.chatId,s=e.msgStyle,c=void 0===s?"":s;return n.a.createElement(Gt,{onSubmit:function(e){t(a,r,e.name)},msgStyle:c})},zt=function(e){var t=e.member,a=e.memberStyle,r=e.chatMemberSettings,s=void 0===r?null:r,c=e.setMemberOperShow,o=void 0===c?null:c,u=e.setSelectedMember,l=void 0===u?null:u;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:a},n.a.createElement(H.b,{to:"/profile/"+t.id},n.a.createElement("div",{className:We.a.memberName},t.name),n.a.createElement("div",{className:We.a.memberPhoto},n.a.createElement("img",{src:t.photos.small,alt:"Ava"}))),s?n.a.createElement("a",{className:s,onClick:function(e){l(t.id),o(e)}},"Operations"):null))},Jt=function(e){var t=e.members,a=e.membersShow,r=e.memberOperShow,s=e.selectedMember,c=e.memberOpers;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:a?He.a.chatsMembersActive:He.a.chatsMembers},n.a.createElement("div",{className:a?He.a.chatsMembersActive:He.a.chatsMembers},t)),n.a.createElement("div",{className:"".concat(r?He.a.smthElseListActive:We.a.smthElseList)},c.map((function(e){return n.a.createElement("div",{className:"".concat(He.a.subElemMSBs," ").concat(He.a.infoItemMSBs)},n.a.createElement("a",{className:"".concat(He.a.membOperLink),onClick:e.method(s)},e.name))}))))},Kt=function(e){return n.a.createElement("div",{className:We.a.getMemberList,onClick:function(e){e.stopPropagation()}},n.a.createElement(Bt,{setSelectedForChatUser:function(t){console.log("pre api"),e.addMember(e.chatTypeId,e.chatId,t)},forChat:!0,styleForUsers:He.a.usersForChatActive,styleForUser:He.a.userForChat,fWAUFC:e.fWAUFC,clearCurrentFocusedWindow:e.clearCurrentFocusedWindow,chatUsersIds:e.chatUsersIds}))},Xt=function(e){var t=e.sended,a=e.body,r=e.authorName;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:We.a.chatLMAuthorName},r," "),n.a.createElement("div",{className:We.a.chatLMAuthorNameDotted},":"),n.a.createElement("div",{className:We.a.chatLMBody},a),n.a.createElement("div",{className:We.a.chatLMSended},qe(t)))},Zt=function(e){var t=e.lastMessage,a=e.getCountOfNewGlobalMsgs,r=e.members,s=e.chatType,c=e.name,o=e.setCurrentChatData,u=e.chatTypeId,l=e.chatId,i=e.chatPhotoSmall,d=e.isFetching,m=e.clearChatMyLocal,f=e.clearChatMyGlobal,h=e.clearChatAllLocal,g=e.clearChatAllGlobal,p=e.renameChatRequest,b=e.deleteChatRequest,E=e.addMember,v=e.setChatPhotoRequest,C=Object(De.a)(e,["lastMessage","getCountOfNewGlobalMsgs","members","chatType","name","setCurrentChatData","chatTypeId","chatId","chatPhotoSmall","isFetching","clearChatMyLocal","clearChatMyGlobal","clearChatAllLocal","clearChatAllGlobal","renameChatRequest","deleteChatRequest","addMember","setChatPhotoRequest"]),_=function(e){e(u,l)},O="/chats/".concat(s,"/").concat(c,"/"),I=r.map((function(e){return e.id}));return r=r.map((function(e){return n.a.createElement(zt,{member:e,key:e.id,memberStyle:"".concat(We.a.member," ").concat(We.a.subElem2)})})),d?n.a.createElement(Re,null):n.a.createElement(n.a.Fragment,null,null!==C.fWAUFC.data&&C.fWAUFC.data[1]===l&&C.fWAUFC.data[0]===u&&n.a.createElement("div",{className:We.a.addMember},n.a.createElement("div",{className:We.a.addMemberHeader},n.a.createElement(Kt,{addMember:E,chatTypeId:u,chatId:l,chatUsersIds:I,clearCurrentFocusedWindow:C.clearCurrentFocusedWindow,fWAUFC:C.fWAUFC}))),n.a.createElement("div",{className:We.a.chatItem},n.a.createElement(H.b,{to:O,className:We.a.chatItemData,onClick:function(){o(u,l)}},n.a.createElement("div",{className:We.a.chatItemPhoto},null!==i?n.a.createElement("img",{src:i}):n.a.createElement("div",{className:""},"chatPhotoSmall")),Object.keys(t).length>0?n.a.createElement(Xt,{sended:t.sended,body:t.body,key:t.id,authorName:t.authorName}):null,n.a.createElement("div",{className:We.a.chatItemNewMsgsNum},a),n.a.createElement("div",{className:We.a.chatItemName},c)),n.a.createElement("div",{className:We.a.chatSettings},"Settings:",n.a.createElement("div",{className:We.a.chatSettingsHeader},n.a.createElement("div",{className:We.a.chatSettingsMembersListHeader},"members:",n.a.createElement("div",{className:We.a.chatSettingsMembersList},r)),n.a.createElement("div",{className:We.a.smthElseHeader},"clear chat:",n.a.createElement("div",{className:We.a.smthElseList},n.a.createElement("div",{className:"".concat(We.a.subElem," ").concat(We.a.infoItem)},n.a.createElement("button",{onClick:function(){return _(m)}},"Clear My Messages Locally")),n.a.createElement("div",{className:"".concat(We.a.subElem," ").concat(We.a.infoItem)},n.a.createElement("button",{onClick:function(){return _(f)}},"Clear My Messages Globally")),n.a.createElement("div",{className:"".concat(We.a.subElem," ").concat(We.a.infoItem)},n.a.createElement("button",{onClick:function(){return _(h)}},"Clear All Messages Locally")),n.a.createElement("div",{className:"".concat(We.a.subElem," ").concat(We.a.infoItem)},n.a.createElement("button",{onClick:function(){return _(g)}},"Clear All Messages Globally")))),n.a.createElement("div",{className:We.a.renameChatHeader},"rename",1===u&&n.a.createElement("div",{className:We.a.renameChatItem},n.a.createElement(Vt,{renameChatRequest:p,chatTypeId:u,chatId:l}))),n.a.createElement("div",{className:We.a.smthElseHeader},"other operations",n.a.createElement("div",{className:We.a.smthElseList},n.a.createElement("div",{className:"".concat(We.a.subElem," ").concat(We.a.infoItem)},"set photo",1===u&&n.a.createElement("div",{className:We.a.changePhotoChat},n.a.createElement(qt,{setChatPhotoRequest:v,chatTypeId:u,chatId:l}))),n.a.createElement("div",{className:"".concat(We.a.subElem," ").concat(We.a.infoItem)},1===u&&n.a.createElement("div",{className:We.a.addMemberItem},null===C.fWAUFC.data&&n.a.createElement("a",{onClick:function(e){return e.stopPropagation(),C.addFocusedWindow(C.fWAUFC.id,[u,l])}},"Add Member"))),n.a.createElement("div",{className:"".concat(We.a.deleteChat," ").concat(We.a.subElem," ").concat(We.a.infoItem)},n.a.createElement("button",{onClick:function(){return _(b)}},"DELETE CHAT"))))))))},Qt=Object(Pt.a)((function(e){return e.chatsPage.chats}),(function(e){return e.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{members:e.members.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{photos:ee(e.photos)})})),chatPhoto:ee(e.chatPhoto)})}))})),Yt=function(e){return e.chatsPage.messages},$t=function(e){return e.chatsPage.chatTypeId},ea=function(e){return e.chatsPage.chatId},ta=Object(Pt.a)((function(e){return e.chatsPage.currentChat}),(function(e){return null!==e?Object(p.a)(Object(p.a)({},e),{},{members:e.members.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{photos:ee(e.photos)})})),chatPhoto:ee(e.chatPhoto)}):null})),aa=function(e){return e.app.focusedWindows},ra=function(e){return e.app.focusedWindowsIds},na=function(e){return Object(Pt.a)(aa,ra,(function(t,a){return t.find((function(t){return t.id===a[e]}))||{id:a[e],data:null}}))},sa=na("fWUsersFCId"),ca=na("fWAddUserFCId"),oa=na("fWMembersId"),ua=na("fWMemberOperationsId"),la=(a(293),{initialized:!1,focusedWindows:[],focusedWindowsIds:{fWUsersFCId:0,fWAddUserFCId:1,fWMembersId:2,fWMemberOperationsId:3}}),ia=function(e,t){return{type:"SET_FOCUSED_WINDOWS",newFocusedWindow:{id:e,data:t}}},da=function(e){return{type:"CLEAR_CURRENT_FOCUSED_WINDOW",currentWindowId:e}},ma=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:la,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(p.a)(Object(p.a)({},e),{},{initialized:!0});case"SET_FOCUSED_WINDOWS":return Object(p.a)(Object(p.a)({},e),{},{focusedWindows:[].concat(Object(g.a)(e.focusedWindows),[t.newFocusedWindow])});case"CLEAR_FOCUSED_WINDOWS":return Object(p.a)(Object(p.a)({},e),{},{focusedWindows:[]});case"CLEAR_CURRENT_FOCUSED_WINDOW":return Object(p.a)(Object(p.a)({},e),{},{focusedWindows:e.focusedWindows.filter((function(e){return e.id!==t.currentWindowId}))});default:return e}},fa=Object(st.a)({form:"CreateChat"})((function(e){var t=e.handleSubmit,a=e.pristine,r=e.reset,s=e.submitting,c=e.error;return n.a.createElement("form",{onSubmit:t,className:We.a.createChatForm},Qe("Name","name",Xe,[rt]),n.a.createElement(Ye,{pristine:a,reset:r,submitting:s,error:c,sumbitButtonName:"Create Chat"}))})),ha=Object(Q.d)($,Object(d.b)((function(e){return{chats:Qt(e),isAuth:e.auth.isAuth,isFetching:e.chatsPage.isFetching,isUnmount:e.chatsPage.isUnmount,myUserId:e.auth.userId,OLDsnusers:e.chatsPage.usersToSelect,fWUFC:sa(e),fWAUFC:ca(e),fWMFC:oa(e),fWMOFC:ua(e)}}),{getChats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){var a=Object(h.a)(f.a.mark((function a(r){var n,s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.getChats(e,t);case 2:if(0!==(n=a.sent).data.resultCode){a.next=10;break}return a.next=6,Ee(n.data.data.chats.items);case 6:s=a.sent,r(ie(s)),a.next=11;break;case 10:console.log("getChats error "+n.data.messages[0]);case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},setCurrentChatData:function(e,t){return function(a){a(oe(!0)),localStorage.setItem("chatTypeId",e),localStorage.setItem("chatId",t),a(oe(!1))}},unSetCurrentChatData:function(){return function(e){delete localStorage.chatId,delete localStorage.chatTypeId,e(ce(null,null,null))}},clearChatMyLocal:Me,clearChatMyGlobal:Se,clearChatAllLocal:Fe,clearChatAllGlobal:ye,createDialog:function(e){return we(e,null)},createConversation:function(e,t){return we(e,t)},renameChatRequest:Ne,addMember:Pe,setChatPhotoRequest:Ue,deleteChatRequest:function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(r){var n,s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.deleteChat(e,t);case 2:""===(n=a.sent).data?console.log("chat succ deleted"):(s=n.data.messages.length?n.data.messages[0]:"Some error",console.log("deleteChatRequest error: "+s));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},addFocusedWindow:ia,clearCurrentFocusedWindow:da}),X.f)((function(e){var t=Object(r.useState)(!0),a=Object(Z.a)(t,2),s=a[0],c=a[1],o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=Object(r.useState)([]),n=Object(Z.a)(a,2),s=n[0],c=n[1],o=function(a){e.apply(void 0,[s].concat(Object(g.a)(t.map((function(e){return a[e]})))))};return[s,c,o]}(e.createConversation,["name"]),u=Object(Z.a)(o,3),l=u[0],i=u[1],d=u[2];if(Object(r.useEffect)((function(){(function(){var t=Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=5;break}return e.unSetCurrentChatData(),t.next=4,e.getChats();case 4:c(!1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e,s]),Object(r.useEffect)((function(){console.log("start refresh"),setTimeout(Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getChats();case 2:case"end":return t.stop()}}),t)}))),5e3),console.log("end refresh"),console.log("effect refresh used by changing: ")}),[e]),s)return n.a.createElement(Re,null);var m=e.chats.map((function(t){return n.a.createElement(Zt,{lastMessage:t.lastMessage,getCountOfNewGlobalMsgs:t.getCountOfNewGlobalMsgs,members:t.members,name:t.name,chatType:t.chatType,chatId:t.chatId,chatTypeId:t.chatTypeId,key:t.id,setCurrentChatData:e.setCurrentChatData,chatPhotoSmall:t.chatPhoto.small,isFetching:e.isFetching,clearChatMyLocal:e.clearChatMyLocal,clearChatMyGlobal:e.clearChatMyGlobal,clearChatAllLocal:e.clearChatAllLocal,clearChatAllGlobal:e.clearChatAllGlobal,renameChatRequest:e.renameChatRequest,setChatPhotoRequest:e.setChatPhotoRequest,addMember:e.addMember,deleteChatRequest:e.deleteChatRequest,fWAUFC:e.fWAUFC,clearCurrentFocusedWindow:e.clearCurrentFocusedWindow,addFocusedWindow:e.addFocusedWindow})}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:We.a.chats},n.a.createElement("div",{className:We.a.chats_header},"Chats"),n.a.createElement("div",{className:We.a.createChat},n.a.createElement("div",{className:We.a.createChatHeader},"Create Conversation",l.length>1&&n.a.createElement(fa,{onSubmit:d,snusers:e.snusers,myUserId:e.myUserId}),null!==e.fWUFC.data?n.a.createElement("div",{className:We.a.getMemberList,onClick:function(e){e.stopPropagation()}},n.a.createElement(Bt,{setSelectedForChatUsers:i,forChat:!0,selectedForChatUsers:l,styleForUsers:He.a.usersForChatActive,styleForUser:He.a.userForChat,clearCurrentFocusedWindow:e.clearCurrentFocusedWindow,fWUFCID:e.fWUFC.id,toogleFocuseElem:e.toogleFocuseElem}),1===l.length&&n.a.createElement("a",{onClick:function(){e.createDialog(l[0]),e.clearCurrentFocusedWindow(e.fWUFC.id)}},"Create Dialog")):n.a.createElement("a",{className:We.a.getMemberList,onClick:function(t){t.stopPropagation(),e.addFocusedWindow(e.fWUFC.id,!0)}},"Choose Users for Chat"))),n.a.createElement("div",{className:We.a.chatsItems},m)))})),ga={posts:[{id:1,message:"Hi, how are you?",likesCount:12},{id:2,message:"It's my first post",likesCount:11},{id:3,message:"Blabla",likesCount:11},{id:4,message:"Dada",likesCount:11}],profile:null,status:""},pa=function(e){return{type:"SET_USER_PROFILE",profile:e}},ba=function(e){return{type:"SET_STATUS",status:e}},Ea=function(e){return{type:"UPDATE_USER_PROFILE",profileData:e}},va=function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var r,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:0===(r=t.sent).data.resultCode&&((n=r.data.data).photos=ee(n.photos),n.contacts=ee(n.contacts),a(pa(n)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ca=function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var r,n,s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(e);case 2:0===(r=t.sent).data.resultCode?("photos"in(n=r.data.data)&&(n.photos=ee(n.photos)),"contacts"in n&&(n.contacts=ee(n.contacts)),a(Ea(n))):(s=r.data.messages.length?r.data.messages[0]:"Some error",a(Object(k.b)("updateProfile",{_error:s})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var a={id:5,message:t.newPostText,likesCount:0};return Object(p.a)(Object(p.a)({},e),{},{posts:[].concat(Object(g.a)(e.posts),[a])});case"DELETE_POST":return Object(p.a)(Object(p.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});case"SET_USER_PROFILE":return Object(p.a)(Object(p.a)({},e),{},{profile:t.profile});case"UPDATE_USER_PROFILE":return Object(p.a)(Object(p.a)({},e),{},{profile:Object(p.a)(Object(p.a)(Object(p.a)({},e.profile),t.profileData),{},{photos:Object(p.a)(Object(p.a)({},e.profile.photos),t.profileData.photos),contacts:Object(p.a)(Object(p.a)({},e.profile.contacts),t.profileData.contacts)})});case"SET_STATUS":return Object(p.a)(Object(p.a)({},e),{},{profile:Object(p.a)(Object(p.a)({},e.profile),{},{status:t.status})});case"SET_PHOTO":return Object(p.a)(Object(p.a)({},e),{},{profile:Object(p.a)(Object(p.a)({},e.profile),{},{photos:t.photos})});default:return e}},Oa=a(137),Ia=a.n(Oa),Ma=a(38),Sa=a.n(Ma),Fa=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=Object(r.useState)(!1),c=Object(Z.a)(s,2),o=c[0],u=c[1],l=Object(r.useState)(e),i=Object(Z.a)(l,2),d=i[0],m=i[1],f=Object(r.useState)(!1),h=Object(Z.a)(f,2),g=h[0],p=h[1],b=Object(r.useState)("".concat(e.length,"/").concat(n)),E=Object(Z.a)(b,2),v=E[0],C=E[1];Object(r.useEffect)((function(){m(e)}),[e]);var _=function(){u(!0)},O=function(){u(!1),!g&&t(d)},I=function(e){a.every((function(t){return void 0===t(e.currentTarget.value)}))?(p(!1),m(e.currentTarget.value),M(e.currentTarget.value.length,n)):p(!0)},M=function(e,t){C("".concat(e,"/").concat(t))};return[_,O,I,o,d,g,v]},ya=function(e){var t=Fa(e.status,e.updateStatus,[tt],30),a=Object(Z.a)(t,7),r=a[0],s=a[1],c=a[2],o=a[3],u=a[4];a[5],a[6];return n.a.createElement("div",{className:""},e.ENSM?n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("span",null,"Status: ",e.status||"-------"))):n.a.createElement("div",null,!o&&n.a.createElement("div",null,n.a.createElement("span",{onDoubleClick:r},"Status: ",e.status||"-------")),o&&n.a.createElement("div",null,n.a.createElement("input",{onChange:c,autoFocus:!0,onBlur:s,value:u}))))},ja=function(e){var t=e.profile,a=e.updateStatus,r=(e.updatePhoto,e.ENSM);return t?(console.log(t.photos.large),n.a.createElement("div",{className:Sa.a.profile_info},n.a.createElement("div",{className:Sa.a.landi_block},n.a.createElement("img",{src:"https://images.pexels.com/photos/248797/pexels-photo-248797.jpeg?auto=compress&cs=tinysrgb&h=350"})),n.a.createElement("div",{className:Sa.a.descriptionBlock},n.a.createElement("div",{className:Sa.a.ava_block},n.a.createElement("img",{src:t.photos.large,alt:"ProfilePhoto"})),n.a.createElement("div",{className:Sa.a.username},"USERNAME: ",t.name),n.a.createElement("div",{className:Sa.a.userinfo},n.a.createElement("div",null,"BIO: Date of Birth: 19 Jan 1997"),n.a.createElement(ya,{status:t.status,updateStatus:a,ENSM:r}),"img url: ",n.a.createElement("a",{target:"_blank",href:t.photos.large},"Get Photo"))))):n.a.createElement(Re,null)},wa=a(59),Na=a.n(wa),Pa=a(138),Ua=a.n(Pa),xa=function(e){return n.a.createElement("div",{className:Ua.a.item},n.a.createElement("img",{src:"https://movies4maniacs.liberty.me/wp-content/uploads/sites/1218/2015/09/avatarsucks.jpg"}),e.message,n.a.createElement("div",null,n.a.createElement("span",null,"like")," ",e.likesCount))},ka=Object(st.a)({form:"ProfileAddNewPostForm"})((function(e){return n.a.createElement("form",{onSubmit:e.handleSubmit}," ",n.a.createElement("div",{className:""},Qe("Write your post","newPostText",Ke,[$e,tt])),n.a.createElement("div",{className:""},n.a.createElement("button",null,"Add post")))})),Ta=Object(d.b)((function(e){return{posts:e.profilePage.posts}}),{addPost:function(e){return{type:"ADD-POST",newPostText:e}}})((function(e){var t=e.posts.map((function(e){return n.a.createElement(xa,{message:e.message,likesCount:e.likesCount})}));return n.a.createElement("div",{className:Na.a.postsBlock},n.a.createElement("div",{className:Na.a.myPostsHeader},"My posts"),n.a.createElement("div",{className:Na.a.createPost},n.a.createElement(ka,{onSubmit:function(t){e.addPost(t.newPostText)}})),n.a.createElement("div",{className:Na.a.posts},t))})),Aa=Object(Q.d)($,Object(d.b)((function(e){return{profile:e.profilePage.profile,userId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:va,updateStatus:function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e);case 2:r=t.sent,console.log(r),0===r.data.resultCode&&a(ba(e));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updatePhoto:function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var r,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e);case 2:0===(r=t.sent).data.resultCode?a({type:"SET_PHOTO",photos:e}):(n=r.data.messages.length?r.data.messages[0]:"Some error",a(Object(k.b)("updatePhoto",{_error:n})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},deleteUserProfile:function(){return function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==w().data.resultCode){e.next=6;break}t(pa(null)),L.logout(),e.next=10;break;case 6:return e.next=8,S();case 8:0!==e.sent.data.resultCode&&(t(pa(null)),L.logout());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},updateUserProfile:Ca}),X.f)((function(e){var t=function(){var e=Object(r.useState)(!1),t=Object(Z.a)(e,2),a=t[0],n=t[1],s=Object(r.useState)(!1),c=Object(Z.a)(s,2),o=c[0],u=c[1];return[a,n,o,u,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(null!==t?!t:a)?function(){}:e}]}(),a=Object(Z.a)(t,5),s=a[0],c=a[1],o=a[2],u=a[3],l=a[4];return Object(r.useEffect)((function(){(function(){var t=Object(h.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e.match.params.userId)?e.userId!==parseInt(a)?!s&&c(!0):s&&c(!1):((a=e.userId)||e.history.push("/login"),s&&c(!1)),t.next=4,e.getUserProfile(a);case 4:u(!0);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.match.params.userId]),o?n.a.createElement("div",{className:Ia.a.profile_wrapper},n.a.createElement(ja,{profile:e.profile,updateStatus:l(e.updateStatus),updatePhoto:l(e.updatePhoto),ENSM:s}),!s&&n.a.createElement("div",{className:""},n.a.createElement(Ta,null)," ",n.a.createElement(H.b,{to:"/profile_update"},"Update My Profile"),n.a.createElement("button",{onClick:e.deleteUserProfile},"Delete My Profile")," ")):n.a.createElement(Re,null)})),Ra=Object(st.a)({form:"login"})((function(e){var t=e.handleSubmit,a=e.pristine,r=e.reset,s=e.submitting,c=e.error;return n.a.createElement("form",{onSubmit:t},Qe("Login","login",Xe,[$e]),Qe("Password","password",Xe,[$e],{type:"password"}),c&&n.a.createElement("div",{className:Ve.a.formSummaryError},c),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"submit",disabled:a||s},"Login")),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"button",disabled:a||s,onClick:r},"Clear Values")))})),Da=Object(d.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t){return function(){var a=Object(h.a)(f.a.mark((function a(r){var n,s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O("token");case 2:return a.next=4,F(e,t);case 4:if(0!==(n=a.sent).data.resultCode){a.next=11;break}return a.next=8,_("token",n.data.data.token);case 8:D(r,n.data.data),a.next=13;break;case 11:s=n.data.messages.length?n.data.messages[0]:"Some error",r(Object(k.b)("login",{_error:s}));case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){return e.isAuth?n.a.createElement(X.a,{to:"/profile"}):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:""},n.a.createElement("h1",null,"LOGIN"),n.a.createElement(Ra,{onSubmit:function(t){e.login(t.login,t.password)}})))})),La=Object(st.a)({form:"updateProfile"})((function(e){var t=Object(r.useState)(e.profile.lookingForAJob),a=Object(Z.a)(t,2),s=a[0],c=a[1],o=e.handleSubmit,u=e.pristine,l=e.reset,i=e.submitting,d=e.error,m=e.profile;return n.a.createElement("form",{onSubmit:o},n.a.createElement("label",{htmlFor:""},"Name"),Qe(m.name,"name",Xe,[tt],{defaultValue:m.name}),n.a.createElement("label",{htmlFor:""},"Status"),Qe(m.status,"status",Ke,[rt],{defaultValue:m.status}),n.a.createElement("h3",null,"Photos"),n.a.createElement("h4",null,"Large"),Qe(m.photos.large,"photos_large",Xe,null,{defaultValue:m.photos.large})," ",n.a.createElement("label",{htmlFor:""},"Small"),Qe(m.photos.small,"photos_small",Xe,null,{defaultValue:m.photos.small}),n.a.createElement("label",{htmlFor:""},"Are you looking for A job?"),Qe(m.lookingForAJob,"lookingForAJob",Xe,null,{type:"checkbox",checked:s,onClick:function(){return c(!s)}})," ",n.a.createElement("label",{htmlFor:""},"Make a small description for a job you are looking for"),Qe(m.lookingForAJobDescription,"lookingForAJobDescription",Ke,[rt],{defaultValue:m.lookingForAJobDescription}),n.a.createElement("label",{htmlFor:""},"Fullname"),Qe(m.fullname,"fullname",Ke,[rt],{defaultValue:m.fullname}),n.a.createElement("h3",null,"Contacts"),n.a.createElement("h4",null,"github"),Qe(m.contacts.github,"contacts_github",Xe,[at],{defaultValue:m.contacts.github}),Qe("vk","contacts_vk",Xe,[at],{defaultValue:m.contacts.vk}),Qe("facebook","contacts_facebook",Xe,[at],{defaultValue:m.contacts.facebook}),Qe("instagram","contacts_instagram",Xe,[at],{defaultValue:m.contacts.instagram}),Qe("twitter","contacts_twitter",Xe,[at],{defaultValue:m.contacts.twitter}),Qe("website","contacts_website",Xe,[at],{defaultValue:m.contacts.website}),Qe("youtube","contacts_youtube",Xe,[at],{defaultValue:m.contacts.youtube}),Qe("mainLink","contacts_mainLink",Xe,[at],{defaultValue:m.contacts.mainLink}),d&&n.a.createElement("div",{className:Ve.a.formSummaryError},d),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"submit",disabled:u||i},"Update")),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"button",disabled:u||i,onClick:l},"Clear Values")))})),Wa=Object(Q.d)($,Object(d.b)((function(e){return{profile:e.profilePage.profile,userId:e.auth.userId,isAuth:e.auth.isAuth}}),{updateUserProfile:Ca,getUserProfile:va}))((function(e){Object(r.useEffect)((function(){e.getUserProfile(e.userId)}),[]);var t=Object(r.useState)(!1),a=Object(Z.a)(t,2),s=a[0],c=a[1],o=function(e,t,a){var r=["contacts","photos"];r.every((function(e){return!t.startsWith(e)}))?e[t]=a:r.map((function(r){return t.startsWith(r)&&(e[r]={},e[r][t.split("_")[1]]=a),!0}))};return s?n.a.createElement(X.a,{to:"/profile"}):e.profile?n.a.createElement("div",{className:""},n.a.createElement("h2",{className:""},"Profile Data Changing"),n.a.createElement(La,{onSubmit:function(t){var a={};for(var r in t)o(a,r,t[r]);Object.keys(a).map((function(t){["contacts","photos"].includes(t)&&(a=Object(p.a)(Object(p.a)({},a),{},Object(Mt.a)({},t,ct(Object.keys(e.profile[t]).reduce((function(r,n){return r[n]=n in a[t]?a[t][n]:e.profile[t][n],r}),{})))))})),e.updateUserProfile(a),c(!0)},profile:e.profile})):n.a.createElement(Re,null)})),Ba=function(e){var t=e.isInvalid,a=e.onMBChange,r=e.deactivateEditMode,s=e.editedMessage,c=e.charCount;return n.a.createElement("div",{className:He.a.editMessage},n.a.createElement("textarea",{className:t?"".concat(He.a.editField," ").concat(He.a.error):"".concat(He.a.editField),onChange:a,autoFocus:!0,onBlur:r,value:s}),t&&n.a.createElement("div",{className:He.a.errorField},"Invalid Data"),n.a.createElement("div",{className:He.a.countChars},c))},Ha=function(e){var t=e.fileId,a=e.activateEditMode,r=e.messageBody,s=e.fileImageURL,c=e.loadFile,o=e.ENSM;return t?n.a.createElement("div",{className:He.a.messageBody,onDoubleClick:o?void 0:a}," ",r,n.a.createElement("div",{className:"".concat(He.a.messageFile," ").concat(null===s?He.a.fileImageDeactivate:He.a.fileImageActivate)},c&&n.a.createElement(n.a.Fragment,null,n.a.createElement("span",null," + fileId: ",t),n.a.createElement("button",{onClick:function(){return c(t)}},"GetFile")),n.a.createElement("img",{src:s}))):n.a.createElement("div",{className:He.a.messageBody,onDoubleClick:o?void 0:a},r)},qa=function(e){var t=e.messageBody,a=e.editMessage,s=e.ENSM,c=e.fileId,o=e.fileIDBKey,u=e.loadImageFromIDB,l=e.getFile,i=Fa(t,a,[nt],1e3),d=Object(Z.a)(i,7),m=d[0],g=d[1],p=d[2],b=d[3],E=d[4],v=d[5],C=d[6],_=Object(r.useState)(!1),O=Object(Z.a)(_,2),I=O[0],M=O[1],S=Object(r.useState)(null),F=Object(Z.a)(S,2),y=F[0],j=F[1];return Object(r.useEffect)((function(){if(!I&&(console.log(o),o&&!y)){var e=function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("loadFromIdb"),e.next=3,u(t);case 3:a=e.sent,console.log("fileIDBValue for file IDB key: "+t),console.log(a),j(a),M(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();console.log(o),M(!0),e(o)}}),[o,u,y,I]),o&&null===y?n.a.createElement(Re,null):n.a.createElement(n.a.Fragment,null,!b&&n.a.createElement(Ha,{fileId:c,activateEditMode:m,messageBody:t,fileImageURL:y,loadFile:y?void 0:l,ENSM:s}),b&&n.a.createElement(Ba,{isInvalid:v,onMBChange:p,deactivateEditMode:g,editedMessage:E,charCount:C}))},Ga=Object(r.forwardRef)((function(e,t){var a=Object(r.useRef)();Object(r.useImperativeHandle)(t,(function(e){return a.current}));var s=e.message,c=e.editMessageRequest,o=e.deleteMessageRequest,u=e.ENSM,l=e.chatTypeId,i=e.chatId,d=e.getFile,m=e.downloadFile;return n.a.createElement("div",{className:"".concat(He.a.message),ref:a},n.a.createElement("div",{className:He.a.messageAuthorName},n.a.createElement(H.b,{to:"/profile/".concat(s.authorId)},s.authorName)),n.a.createElement(qa,{ENSM:u,editMessage:function(e,t,a){return function(r){return c(e,t,a.id,r)}}(l,i,s),messageBody:s.body,getFile:d,downloadFile:m,fileId:s.fileId,loadImageFromIDB:e.loadImageFromIDB,fileIDBKey:s.fileIDBKey}),n.a.createElement("div",{className:He.a.messageSendedEdited},n.a.createElement("div",{className:He.a.messageSended},"sended: ",qe(s.sended)),n.a.createElement("div",{className:He.a.messageEdited},"edited: ",qe(s.edited))),n.a.createElement("div",{className:He.a.deleteMessage},!u&&n.a.createElement("a",{onClick:function(){o(l,i,s.id,s.fileId)}},"Delete Message")))})),Va={color:"green"},za=Object(st.a)({form:"CreateMessage"})((function(e){var t=e.handleSubmit,a=e.pristine,r=e.reset,s=e.submitting,c=e.error;return n.a.createElement("form",{onSubmit:t},Qe("Write a message...","messageBody",Ke,[nt]),Qe("Upload a file...","uploadedFile",Ze,null,{type:"file"}),c&&n.a.createElement("div",{className:Ve.a.formSummaryError},c),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"submit",disabled:a||s},"Send")),n.a.createElement("div",{className:""},n.a.createElement("button",{type:"button",disabled:a||s,onClick:r},"Clear")))})),Ja=Object(Q.d)($,Object(d.b)(null,{createMessageRequest:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(){var n=Object(h.a)(f.a.mark((function n(s){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s(ge(!0)),s(Object(k.a)("CreateMessage")),console.log("in createMessageRequest"),console.log(r),null===r){n.next=13;break}return n.next=7,x.uploadFile(r.fileURL,r.fileName);case 7:c=n.sent,console.log("fileUploadResponse.data"),console.log(c.data.data),c.data.data.fileId?_e(e,t,a,c.data.data.fileId,s):(console.log("fileUploadResponse error"),console.log(Object.keys(c.data.data))),n.next=14;break;case 13:_e(e,t,a,null,s);case 14:s(ge(!1));case 15:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}))((function(e){return n.a.createElement("div",{className:""},n.a.createElement("div",{style:Va},"Message:"),n.a.createElement(za,{onSubmit:function(t){!t.messageBody&&t.uploadedFile&&(t.messageBody=" "),t.uploadedFile?e.createMessageRequest(e.chatTypeId,e.chatId,t.messageBody,t.uploadedFile):e.createMessageRequest(e.chatTypeId,e.chatId,t.messageBody)}}))})),Ka=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return a?[n.a.createElement("div",{className:"".concat(He.a.newMsgsStartTag),ref:r},"----------UNREAD MESSAGES----------"),n.a.createElement(Ga,{message:e.msg,key:e.msg.id,ref:t,deleteMessageRequest:e.deleteMessageRequest,editMessageRequest:e.editMessageRequest,ENSM:!e.msg.local,chatTypeId:e._chatTypeId,chatId:e._chatId,getFile:e.getFile,loadImageFromIDB:e.loadImageFromIDB})]:n.a.createElement(Ga,{message:e.msg,key:e.msg.id,ref:t,deleteMessageRequest:e.deleteMessageRequest,editMessageRequest:e.editMessageRequest,ENSM:!e.msg.local,chatTypeId:e._chatTypeId,chatId:e._chatId,getFile:e.getFile,loadImageFromIDB:e.loadImageFromIDB})},Xa=Object(Q.d)($,Object(d.b)((function(e){return{messages:Yt(e),isAuth:e.auth.isAuth,chatTypeId:$t(e),chatId:ea(e),currentChat:ta(e),fWAUFC:ca(e),fWMFC:oa(e),fWMOFC:ua(e),readFromIndexNext:e.chatsPage.readFromIndexNext,readFromIndex:e.chatsPage.readFromIndex,readFromIndexBefore:e.chatsPage.readFromIndexBefore,IsFetchingMsgs:e.chatsPage.IsFetchingMsgs,windowScrollOnMsgCreate:e.chatsPage.windowScrollOnMsgCreate,isMessageCreating:e.chatsPage.isMessageCreating,isRefreshedAfterMC:e.chatsPage.isRefreshedAfterMC,numOfDeletedMsgs:e.chatsPage.numOfDeletedMsgs}}),{getMessages:Ce,editMessageRequest:function(e,t,a,r){return function(){var n=Object(h.a)(f.a.mark((function n(s){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.editMessage(e,t,a,r);case 2:0===(c=n.sent).data.resultCode?console.log("succs edited"):console.log("editMessageRequest error "+c.data.messages[0]);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},deleteMessageRequest:function(e,t,a,r){return function(){var n=Object(h.a)(f.a.mark((function n(s){var c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s(fe(!0)),!r){n.next=4;break}return n.next=4,O("image-".concat(r));case 4:return n.next=6,x.deleteMessage(e,t,a);case 6:null===(c=n.sent).data.data?(console.log("succs deleted"),s({type:"INC_NUM_OF_DELETED_MSGS"})):console.log("deleteMessageRequest deleted "+c.data.messages[0]),s(fe(!1));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},getCurrentChatData:function(){return function(){var e=Object(h.a)(f.a.mark((function e(t){var a,r,n,s,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(fe(!0)),a=parseInt(localStorage.getItem("chatId")),r=parseInt(localStorage.getItem("chatTypeId")),e.next=5,x.getChat(r,a);case 5:if(0!==(n=e.sent).data.resultCode){e.next=29;break}if(s="local","local"in n.data.data.lastMessage){e.next=12;break}console.log("not local lastMessage in getCurrentChatData"),e.next=16;break;case 12:if(n.data.data.lastMessage.local){e.next=16;break}return e.next=15,t(je(r,a,n.data.data.lastMessage.id));case 15:s=e.sent;case 16:if("local"!==s&&0!==s.data.resultCode){e.next=26;break}return c=0===r?"dialog":"conversation",n.data.data.chatTypeId=r,n.data.data.chatType=c,n.data.data.chatId=a,t(ce(r,a,n.data.data)),e.next=24,t(Ce(r,a,n.data.data.readFromIndex,n.data.data.readFromIndexBefore));case 24:e.next=27;break;case 26:console.log("getCurrentChatData Error in updateUnreadMsgs"+s.data.messages[0]);case 27:e.next=30;break;case 29:console.log("getCurrentChatData Error in getChat"+n.data.messages[0]);case 30:t(fe(!1));case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},clearChatMyLocal:Me,clearChatMyGlobal:Se,clearChatAllLocal:Fe,clearChatAllGlobal:ye,toogleMemberStatus:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"toogleMemberStatus";return function(){var n=Object(h.a)(f.a.mark((function n(s){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,xe(e,t,a,r,x.toogleMemberStatusForConversation.bind(x),"member status toggled: ","toggled","toogleMemberStatusForConversation error: ",s,re,"members");case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},removeMemberMsgs:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"removeMemberMsgs";return function(){var n=Object(h.a)(f.a.mark((function n(s){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,xe(e,t,a,r,x.removeMemberMsgsForConversation.bind(x),"member msgs removed: ","memberMsgsRemoved","removeMemberMsgs error: ");case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},removeOneMemberMsg:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"removeOneMemberMsg";return function(){var n=Object(h.a)(f.a.mark((function n(s){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,xe(e,t,a,r,x.removeOneMemberMsgForConversation.bind(x),"member msg removed: ","memberMsgRemoved","removeOneMemberMsg error: ");case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},removeMember:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"removeMember";return function(){var n=Object(h.a)(f.a.mark((function n(s){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,xe(e,t,a,r,x.removeMemberFromConversation.bind(x),"member removed: ","memberRemoved","removeMember error: ",s,re,"members");case 2:n.sent;case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setChatPhotoRequest:Ue,addMember:Pe,renameChatRequest:Ne,addFocusedWindow:ia,clearCurrentFocusedWindow:da,getFile:function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var r,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.getFile(e);case 2:r=t.sent,n=r.data,console.log(n),n.name?le(n.file,n.name,n.format).then((function(t){if(n.isImage){console.log("file.isImage");var r=new FileReader;r.onload=function(t){console.log("Uploaded"),a(ue(t.target.result,e))},r.readAsDataURL(t)}else{var s=URL.createObjectURL(t);Object(te.saveAs)(t),URL.revokeObjectURL(s)}})):console.log("error in getting file from api");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setRefreshMessageCreating:pe,loadImageFromIDB:function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),X.f)((function(e){var t=e.getCurrentChatData,a=e.getMessages,s=e.IsFetchingMsgs,c=e.setRefreshMessageCreating,o=e.chatTypeId,u=e.chatId,l=e.readFromIndexNext,i=e.readFromIndex,d=e.windowScrollOnMsgCreate,m=e.isMessageCreating,g=e.isRefreshedAfterMC,b=e.numOfDeletedMsgs,E=e.loadImageFromIDB,v=Object(De.a)(e,["getCurrentChatData","getMessages","IsFetchingMsgs","setRefreshMessageCreating","chatTypeId","chatId","readFromIndexNext","readFromIndex","windowScrollOnMsgCreate","isMessageCreating","isRefreshedAfterMC","numOfDeletedMsgs","loadImageFromIDB"]),C=Object(r.useState)(!1,"oldMsgsDonwload"),_=Object(Z.a)(C,2),O=_[0],I=_[1],M=Object(r.useState)(!1,"preFetch"),S=Object(Z.a)(M,2),F=S[0],y=S[1],j=Object(r.useState)(null,"selectedMember"),w=Object(Z.a)(j,2),N=w[0],P=w[1],U=Object(r.useState)(!0,"refToTopAtStart"),x=Object(Z.a)(U,2),k=x[0],T=x[1],A=Object(r.useState)(!1,"positioningScrollRefScroll"),R=Object(Z.a)(A,2),D=R[0],L=R[1],W=Object(r.useRef)(null),B=Object(r.useRef)(null),H=Object(r.useRef)(null),q=Object(r.useState)(!1),G=Object(Z.a)(q,2),V=G[0],z=G[1],J=Object(r.useRef)(null);Object(r.useEffect)((function(){F&&K(k?"start":"notStart",k?B.current:W.current,k?null===v.currentChat.firstNewMsgID:D&&!O,H.current)})),Object(r.useEffect)((function(){g&&(J.current?J.current.scrollIntoView():console.log("some wierd error in ref creating for last msg after creation"),g&&c(!1))}),[c,g]),Object(r.useEffect)((function(){var e,t=null,a=new IntersectionObserver((function(e,t){e.forEach((function(e){var a=e.isIntersecting;console.log("only after scroll calling"),a&&(console.log("intersetcion of target(should be true) "),console.log("TOP DIV VIEWED: "+e.target.innerText),t.unobserve(e.target),I(!0))}))}),{threshold:(e=2,Array(e+1).fill(0).map((function(t,a){return a/e||0})))});return H.current&&F&&(!D&&!O||k)&&(t=H.current,a.observe(t)),function(){return null!==t&&a.unobserve(t)}}),[D,O,k,F]);var K=function(e,t,a,r){null!=t&&("start"===e?(a?t.scrollTop=t.scrollHeight:t.scrollIntoView(),T(!1)):a&&(t.scrollIntoView(),L(!1)))};if(Object(r.useEffect)((function(){(console.log("should run 2 times only (preFetch)"),F)||function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:y(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[F,t]),Object(r.useEffect)((function(){var e=null;return V||(e=setTimeout(Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O||!F||s||D){e.next=5;break}return z(!0),e.next=4,a(o,u,i,v.readFromIndexBefore,null,d&&!m,b);case 4:z(!1);case 5:case"end":return e.stop()}}),e)}))),1500)),function(){null!==e&&clearTimeout(e)}}),[F,O,s,D,o,u,i,v.readFromIndexBefore,a,d,m,b,V]),Object(r.useEffect)((function(){if(!D&&O&&!s){var e=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(o,u,l,i);case 2:I(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();L(!0),e()}}),[s,D,O,I,L,o,u,l,i,a]),F){b>0&&(console.log("numOfDeletedMsgs"),console.log(b));var X=l!==i?n.a.createElement("div",{className:"".concat(He.a.loadOldMsgsDiv),ref:H}):n.a.createElement("div",{className:"".concat(He.a.startChatDiv)},"----------Chat Start----------"),Q=v.messages.map((function(e,t){var a={msg:e,getFile:v.getFile,_chatId:u,_chatTypeId:o,editMessageRequest:v.editMessageRequest,deleteMessageRequest:v.deleteMessageRequest,loadImageFromIDB:E};return null!==v.currentChat.firstNewMsgID&&v.currentChat.firstNewMsgID<=e.id&&(0===t||v.messages[t-1].id<v.currentChat.firstNewMsgID)?Ka(a,e.id===v.readFromIndexBefore&&D?W:void 0,!0,null!==v.currentChat.firstNewMsgID&&k?B:void 0):t===v.messages.length-1?Ka(a,g?J:void 0):Ka(a,e.id===v.readFromIndexBefore&&D?W:void 0)})).flat();Q.unshift(X);var Y=[{method:v.toogleMemberStatus,name:"Toogle Member"},{method:v.removeMemberMsgs,name:"Remove All Member Messages"},{method:v.removeMember,name:"Remove Member"}],$=v.currentChat.members.map((function(e){return e.id})),ee=1===o?v.currentChat.members.map((function(e){return n.a.createElement(zt,{member:e,key:e.id,memberStyle:"".concat(He.a.chatMember),chatMemberSettings:"".concat(He.a.chatMemberSettings),setMemberOperShow:function(e){return e.stopPropagation(),v.addFocusedWindow(v.fWMOFC.id,!0)},addFocusedWindow:v.addFocusedWindow,fWMOFC:v.fWMOFC,setSelectedMember:P})})):v.currentChat.members.map((function(e){return n.a.createElement(zt,{member:e,key:e.id})}));return n.a.createElement(n.a.Fragment,null,null!==v.fWAUFC.data&&n.a.createElement("div",{className:We.a.addMember},n.a.createElement(Kt,{addMember:v.addMember,chatTypeId:o,chatId:u,chatUsersIds:$,fWAUFC:v.fWAUFC,clearCurrentFocusedWindow:v.clearCurrentFocusedWindow})),n.a.createElement("div",{className:He.a.currentChat},n.a.createElement(Jt,{members:ee,membersShow:v.fWMFC.data,memberOperShow:v.fWMOFC.data,selectedMember:N,memberOpers:Y.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{method:(t=e.method,a=o,r=u,function(e){return function(){return t(a,r,e)}})});var t,a,r}))}),n.a.createElement("div",{className:He.a.chatsHeader},n.a.createElement("div",{className:He.a.chatsHeaderPhoto}," ",null!==v.currentChat.chatPhoto.small?n.a.createElement("img",{src:v.currentChat.chatPhoto.small}):n.a.createElement("div",{className:He.a.chatsHeaderPhotoAlt},"chatPhotoSmall")),n.a.createElement("div",{className:He.a.chatsHeaderName},v.currentChat.name),n.a.createElement("div",{className:He.a.chatsHeaderSettings},"Settings",n.a.createElement("div",{className:He.a.chatsSettings},1===o&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:He.a.chatsSettingsItem},null===v.fWAUFC.data&&n.a.createElement("a",{className:We.a.getMemberList,onClick:function(e){return e.stopPropagation(),v.addFocusedWindow(v.fWAUFC.id,[o,u])}},"Add Member")),n.a.createElement("div",{className:He.a.chatsSettingsItem},n.a.createElement("div",{className:He.a.chatsSettingsItemH},"Change Photo"),n.a.createElement(qt,{msgStyle:He.a.chatsSettingsItemForm,setChatPhotoRequest:v.setChatPhotoRequest,chatTypeId:o,chatId:u})),n.a.createElement("div",{className:He.a.chatsSettingsItem},n.a.createElement("div",{className:He.a.chatsSettingsItemH},"Rename Chat"),n.a.createElement(Vt,{msgStyle:He.a.chatsSettingsItemForm,renameChatRequest:v.renameChatRequest,chatTypeId:o,chatId:u}))),n.a.createElement("div",{className:He.a.chatsSettingsItem},n.a.createElement("div",{className:He.a.chatsMembersHeader},null===v.fWMFC.data&&n.a.createElement("a",{onClick:function(e){return e.stopPropagation(),v.addFocusedWindow(v.fWMFC.id,!0)}},"Chat Members")))))),n.a.createElement("div",{className:He.a.messages,ref:null===v.currentChat.firstNewMsgID&&k?B:void 0},Q),n.a.createElement("div",{className:He.a.createMessageForm},n.a.createElement(Ja,{chatTypeId:o,chatId:u,isAuth:v.isAuth}))))}return n.a.createElement(Re,null)})),Za=n.a.memo((function(e){return console.log("rerender"),console.log(e.initialized),Object(r.useEffect)((function(){e.initializeApp()}),[]),e.initialized?n.a.createElement("div",{className:"whole-app-page-wrapper",onClick:function(){e.clearAllFocusedWindows()}},n.a.createElement("div",{className:"app-wrapper"},n.a.createElement(V,null),n.a.createElement(K,null),n.a.createElement("div",{className:"app-wrapper-content"},n.a.createElement(X.b,{path:"/profile/:userId?",render:function(){return n.a.createElement(Aa,null)}}),n.a.createElement(X.b,{path:"/profile_update",render:function(){return n.a.createElement(Wa,null)}}),n.a.createElement(X.b,{path:"/login",render:function(){return n.a.createElement(Da,null)}}),n.a.createElement(X.b,{path:"/users",render:function(){return n.a.createElement(Bt,null)}}),n.a.createElement(X.b,{exact:!0,path:"/chats",render:function(){return n.a.createElement(ha,null)}}),n.a.createElement(X.b,{path:"/chats/:chatType/:name?",render:function(){return n.a.createElement(Xa,null)}})))):n.a.createElement(Re,null)})),Qa=Object(Q.d)(X.f,Object(d.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){Promise.all([e(function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:return"detail"in(a=e.sent).data?["Signature has expired.","Error decoding signature.","Invalid Authorization header. No credentials provided."].includes(a.data.detail)?console.log(a.data.detail):console.log("its amaizing error - server error"):0===a.data.resultCode&&D(t,a.data.data),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())]).then((function(t){e({type:"INITIALIZED_SUCCESS"})})).catch((function(t){["Signature has expired.","Error decoding signature.","Invalid Authorization header. No credentials provided."].includes(t.response.data.detail)||console.log("its amaizing error - server error"),e({type:"INITIALIZED_SUCCESS"})})).catch((function(t){console.log("you gonna die"),e({type:"INITIALIZED_SUCCESS"})}))}},clearAllFocusedWindows:function(){return{type:"CLEAR_FOCUSED_WINDOWS"}}}))(Za);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ya=a(129),$a={},er=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a;return e},tr=a(139),ar=Object(Q.c)({profilePage:_a,chatsPage:ke,sidebar:er,usersPage:bt,auth:L,form:Ya.a,app:ma}),rr=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Q.d,nr=Object(Q.e)(ar,rr(Object(Q.a)(tr.a)));window.__store__=nr;var sr=nr,cr=a(140);a.n(cr)()(n.a),c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(H.a,null,n.a.createElement(d.a,{store:sr},n.a.createElement(Qa,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},38:function(e,t,a){e.exports={profile_info:"ProfileInfo_profile_info__3Xye6",landi_block:"ProfileInfo_landi_block__6gqOF",descriptionBlock:"ProfileInfo_descriptionBlock__KO8pz",ava_block:"ProfileInfo_ava_block__a6DMK",username:"ProfileInfo_username__3sJav",userinfo:"ProfileInfo_userinfo__zdjYE"}},5:function(e,t,a){e.exports={chats:"Chats_chats__26r34",chats_header:"Chats_chats_header__2ZjAD",chatsItems:"Chats_chatsItems__2Ger5",createChat:"Chats_createChat__ciYfP",addMember:"Chats_addMember__3K9eK",getMemberList:"Chats_getMemberList___8yTw",addMemberHeader:"Chats_addMemberHeader__2bT9H",createChatHeader:"Chats_createChatHeader__1fp0w",createChatForm:"Chats_createChatForm__qU4P4",chatItem:"Chats_chatItem__d-61Y",chatItemData:"Chats_chatItemData__3Q4U3",chatItemPhoto:"Chats_chatItemPhoto__8OaoM",chatLMBody:"Chats_chatLMBody__PdKCq",chatLMSended:"Chats_chatLMSended__30pkV",chatLMAuthorName:"Chats_chatLMAuthorName__32CRr",chatLMAuthorNameDotted:"Chats_chatLMAuthorNameDotted__1J1Z0",chatItemNewMsgsNum:"Chats_chatItemNewMsgsNum__1LG1Q",chatItemName:"Chats_chatItemName__1M4vy",member:"Chats_member__3xMbX",memberName:"Chats_memberName__3s-UI",memberPhoto:"Chats_memberPhoto__1n1Td",chatSettings:"Chats_chatSettings__3ql28",chatSettingsMembersList:"Chats_chatSettingsMembersList__1BctW",smthElseList:"Chats_smthElseList__3Nx2r",subElem:"Chats_subElem__1REmT",subElem2:"Chats_subElem2__2R59R",infoItem:"Chats_infoItem__3fkvK",deleteChat:"Chats_deleteChat__3vv4E",renameChatItem:"Chats_renameChatItem__1GfT8",addBorder:"Chats_addBorder__3HJO5"}},59:function(e,t,a){e.exports={postsBlock:"MyPosts_postsBlock__2VQZc",myPostsHeader:"MyPosts_myPostsHeader__1m1Iu",createPost:"MyPosts_createPost__287DL",posts:"MyPosts_posts__zffl0"}},6:function(e,t,a){e.exports={fileImageActivate:"Message_fileImageActivate__nEFNT",fileImageDeactivate:"Message_fileImageDeactivate__38RWt",messageFile:"Message_messageFile__333Xv",currentChat:"Message_currentChat__2SCp-",trash:"Message_trash__1XG-x",chatsHeader:"Message_chatsHeader__1aH3p",chatsHeaderSettings:"Message_chatsHeaderSettings__3yzbg",chatsSettings:"Message_chatsSettings__2drea",chatsSettingsItem:"Message_chatsSettingsItem__3uDhW",chatsSettingsItemForm:"Message_chatsSettingsItemForm__366Ei",chatsSettingsItemH:"Message_chatsSettingsItemH__1h7H8",chatsMembers:"Message_chatsMembers__2noEW",usersForChatActive:"Message_usersForChatActive__3uOxB",userForChat:"Message_userForChat__2MVhF",chatsMembersActive:"Message_chatsMembersActive__1xxl7",chatMember:"Message_chatMember__2En4H",chatMemberSettings:"Message_chatMemberSettings__1qLcz",chatsHeaderName:"Message_chatsHeaderName__3H2k1",chatsHeaderPhoto:"Message_chatsHeaderPhoto__uBOeZ",chatsHeaderPhotoAlt:"Message_chatsHeaderPhotoAlt__NVmFR",messages:"Message_messages__3MN93",loadOldMsgsDiv:"Message_loadOldMsgsDiv__2dBwp",startChatDiv:"Message_startChatDiv__2C1ls",newMsgsStartTag:"Message_newMsgsStartTag__1o397",message:"Message_message__dqadB",messageBody:"Message_messageBody__2oQBg",messageSendedEdited:"Message_messageSendedEdited__927WX",messageSended:"Message_messageSended__2c3O9",messageEdited:"Message_messageEdited__108XK",messageAuthorName:"Message_messageAuthorName__3J3wb",createMessageForm:"Message_createMessageForm__2iUaw",editMessage:"Message_editMessage__24hZ6",deleteMessage:"Message_deleteMessage__2mrWg",editField:"Message_editField__1PtXF",error:"Message_error__1wiZz",errorField:"Message_errorField__MR1Xt",countChars:"Message_countChars__M9urq",smthElseListActive:"Message_smthElseListActive__y4JSK",subElemMSBs:"Message_subElemMSBs__2b8dk",membOperLink:"Message_membOperLink__3T6zI",infoItemMSBs:"Message_infoItemMSBs__dVy0_"}},73:function(e,t,a){e.exports={header:"Header_header__1SlV4",loginBlock:"Header_loginBlock__3Y7F0"}},74:function(e,t,a){e.exports={paginator:"paginator_paginator__16emb",pageNumber:"paginator_pageNumber__25CnE",selectedPage:"paginator_selectedPage__3QX2R"}},94:function(e,t,a){e.exports={userPhoto:"Users_userPhoto__108sy",userChoosePhoto:"Users_userChoosePhoto__1FPZ5",bottom:"Users_bottom__KcjiA",selectedPage:"Users_selectedPage__3HiCL"}}},[[167,1,2]]]);
//# sourceMappingURL=main.01167ce3.chunk.js.map